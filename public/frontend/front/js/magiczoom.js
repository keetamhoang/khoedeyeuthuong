window.MagicZoom=(function(){var K,I;K=I=(function(){var d={version:"v3.3-b5",UUID:0,storage:{},$uuid:function(q){return(q.$J_UUID||(q.$J_UUID=++j.UUID))},getStorage:function(q){return(j.storage[q]||(j.storage[q]={}))},$F:function(){},$false:function(){return false},$true:function(){return true},stylesId:"mjs-"+Math.floor(Math.random()*new Date().getTime()),defined:function(q){return(undefined!=q)},ifndef:function(q,r){return(undefined!=q)?q:r},exists:function(q){return !!(q)},jTypeOf:function(q){if(!j.defined(q)){return false}if(q.$J_TYPE){return q.$J_TYPE}if(!!q.nodeType){if(1==q.nodeType){return"element"}if(3==q.nodeType){return"textnode"}}if(q.length&&q.item){return"collection"}if(q.length&&q.callee){return"arguments"}if((q instanceof window.Object||q instanceof window.Function)&&q.constructor===j.Class){return"class"}if(q instanceof window.Array){return"array"}if(q instanceof window.Function){return"function"}if(q instanceof window.String){return"string"}if(j.browser.trident){if(j.defined(q.cancelBubble)){return"event"}}else{if(q===window.event||q.constructor==window.Event||q.constructor==window.MouseEvent||q.constructor==window.UIEvent||q.constructor==window.KeyboardEvent||q.constructor==window.KeyEvent){return"event"}}if(q instanceof window.Date){return"date"}if(q instanceof window.RegExp){return"regexp"}if(q===window){return"window"}if(q===document){return"document"}return typeof(q)},extend:function(q,r){if(!(q instanceof window.Array)){q=[q]}if(!r){return q[0]}for(var s=0,u=q.length;s<u;s++){if(!j.defined(q)){continue}for(var t in r){if(!Object.prototype.hasOwnProperty.call(r,t)){continue}try{q[s][t]=r[t]}catch(v){}}}return q[0]},implement:function(q,r){if(!(q instanceof window.Array)){q=[q]}for(var t=0,u=q.length;t<u;t++){if(!j.defined(q[t])){continue}if(!q[t].prototype){continue}for(var s in (r||{})){if(!q[t].prototype[s]){q[t].prototype[s]=r[s]}}}return q[0]},nativize:function(r,q){if(!j.defined(r)){return r}for(var s in (q||{})){if(!r[s]){r[s]=q[s]}}return r},$try:function(){for(var r=0,s=arguments.length;r<s;r++){try{return arguments[r]()}catch(q){}}return null},$A:function(r){if(!j.defined(r)){return j.$([])}if(r.toArray){return j.$(r.toArray())}if(r.item){var q=r.length||0,s=new Array(q);while(q--){s[q]=r[q]}return j.$(s)}return j.$(Array.prototype.slice.call(r))},now:function(){return new Date().getTime()},detach:function(q){var t;switch(j.jTypeOf(q)){case"object":t={};for(var r in q){t[r]=j.detach(q[r])}break;case"array":t=[];for(var s=0,u=q.length;s<u;s++){t[s]=j.detach(q[s])}break;default:return q}return j.$(t)},$:function(r){var s=true;if(!j.defined(r)){return null}if(r.$J_EXT){return r}switch(j.jTypeOf(r)){case"array":r=j.nativize(r,j.extend(j.Array,{$J_EXT:j.$F}));r.jEach=r.forEach;return r;break;case"string":var q=document.getElementById(r);if(j.defined(q)){return j.$(q)}return null;break;case"window":case"document":j.$uuid(r);r=j.extend(r,j.Doc);break;case"element":j.$uuid(r);r=j.extend(r,j.Element);break;case"event":r=j.extend(r,j.Event);break;case"textnode":case"function":case"array":case"date":default:s=false;break}if(s){return j.extend(r,{$J_EXT:j.$F})}else{return r}},$new:function(s,r,q){return j.$(j.doc.createElement(s)).setProps(r||{}).jSetCss(q||{})},addCSS:function(w,u,q){var t,v,s,r=[],x=-1;q||(q=j.stylesId);t=j.$(q)||j.$new("style",{id:q,type:"text/css"}).jAppendTo((document.head||document.body),"top");v=t.sheet||t.styleSheet;if("string"!=j.jTypeOf(u)){for(var s in u){r.push(s+":"+u[s])}u=r.join(";")}if(v.insertRule){x=v.insertRule(w+" {"+u+"}",v.cssRules.length)}else{x=v.addRule(w,u)}return x},removeCSS:function(q,t){var s,r;s=j.$(q);if("element"!==j.jTypeOf(s)){return}r=s.sheet||s.styleSheet;if(r.deleteRule){r.deleteRule(t)}else{if(r.removeRule){r.removeRule(t)}}},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var q=Math.random()*16|0,s=r=="x"?q:(q&3|8);return s.toString(16)}).toUpperCase()},getAbsoluteURL:(function(){var q;return function(r){if(!q){q=document.createElement("a")}q.setAttribute("href",r);return("!!"+q.href).replace("!!","")}})(),getHashCode:function(s){var q=0,t=s.length;for(var r=0;r<t;++r){q=31*q+s.charCodeAt(r);q%=4294967296}return q}};var j=d;var i=d.$;if(!window.magicJS){window.magicJS=d;window.$mjs=d.$}j.Array={$J_TYPE:"array",indexOf:function(r,q){var u=this.length;for(var t=this.length,s=(q<0)?Math.max(0,t+q):q||0;s<t;s++){if(this[s]===r){return s}}return -1},contains:function(r,q){return this.indexOf(r,q)!=-1},forEach:function(t,q){for(var s=0,r=this.length;s<r;s++){if(s in this){t.call(q,this[s],s,this)}}},filter:function(v,q){var r=[];for(var s=0,u=this.length;s<u;s++){if(s in this){var t=this[s];if(v.call(q,this[s],s,this)){r.push(t)}}}return r},map:function(u,q){var r=[];for(var t=0,s=this.length;t<s;t++){if(t in this){r[t]=u.call(q,this[t],t,this)}}return r}};j.implement(String,{$J_TYPE:"string",jTrim:function(){return this.replace(/^\s+|\s+$/g,"")},eq:function(r,q){return(q||false)?(this.toString()===r.toString()):(this.toLowerCase().toString()===r.toLowerCase().toString())},jCamelize:function(){return this.replace(/-\D/g,function(q){return q.charAt(1).toUpperCase()})},dashize:function(){return this.replace(/[A-Z]/g,function(q){return("-"+q.charAt(0).toLowerCase())})},jToInt:function(q){return parseInt(this,q||10)},toFloat:function(){return parseFloat(this)},jToBool:function(){return !this.replace(/true/i,"").jTrim()},has:function(q,r){r=r||"";return(r+this+r).indexOf(r+q+r)>-1}});d.implement(Function,{$J_TYPE:"function",jBind:function(){var r=j.$A(arguments),s=this,q=r.shift();return function(){return s.apply(q||null,r.concat(j.$A(arguments)))}},jBindAsEvent:function(){var r=j.$A(arguments),s=this,q=r.shift();return function(t){return s.apply(q||null,j.$([t||(j.browser.ieMode?window.event:null)]).concat(r))}},jDelay:function(){var r=j.$A(arguments),s=this,q=r.shift();return window.setTimeout(function(){return s.apply(s,r)},q||0)},jDefer:function(){var q=j.$A(arguments),r=this;return function(){return r.jDelay.apply(r,q)}},interval:function(){var r=j.$A(arguments),s=this,q=r.shift();return window.setInterval(function(){return s.apply(s,r)},q||0)}});var c={},k=navigator.userAgent.toLowerCase(),l=k.match(/(webkit|gecko|trident|presto)\/(\d+\.?\d*)/i),g=k.match(/(edge|opr)\/(\d+\.?\d*)/i)||k.match(/(crios|chrome|safari|firefox|opera|opr)\/(\d+\.?\d*)/i),e=k.match(/version\/(\d+\.?\d*)/i),p=document.documentElement.style;function o(q){var r=q.charAt(0).toUpperCase()+q.slice(1);return q in p||("Webkit"+r) in p||("Moz"+r) in p||("ms"+r) in p||("O"+r) in p}j.browser={features:{xpath:!!(document.evaluate),air:!!(window.runtime),query:!!(document.querySelector),fullScreen:!!(document.fullscreenEnabled||document.msFullscreenEnabled||document.exitFullscreen||document.cancelFullScreen||document.webkitexitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.oCancelFullScreen||document.msCancelFullScreen),xhr2:!!(window.ProgressEvent)&&!!(window.FormData)&&(window.XMLHttpRequest&&"withCredentials" in new XMLHttpRequest),transition:o("transition"),transform:o("transform"),perspective:o("perspective"),animation:o("animation"),requestAnimationFrame:false,multibackground:false,cssFilters:false,canvas:false,svg:(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")})()},touchScreen:function(){return"ontouchstart" in window||(window.DocumentTouch&&document instanceof DocumentTouch)||(navigator.maxTouchPoints>0)||(navigator.msMaxTouchPoints>0)}(),mobile:k.match(/(android|bb\d+|meego).+|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/)?true:false,engine:(l&&l[1])?l[1].toLowerCase():(window.opera)?"presto":!!(window.ActiveXObject)?"trident":(undefined!==document.getBoxObjectFor||null!=window.mozInnerScreenY)?"gecko":(null!==window.WebKitPoint||!navigator.taintEnabled)?"webkit":"unknown",version:(l&&l[2])?parseFloat(l[2]):0,uaName:(g&&g[1])?g[1].toLowerCase():"",uaVersion:(g&&g[2])?parseFloat(g[2]):0,cssPrefix:"",cssDomPrefix:"",domPrefix:"",ieMode:0,platform:k.match(/ip(?:ad|od|hone)/)?"ios":(k.match(/(?:webos|android)/)||navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),backCompat:document.compatMode&&"backcompat"==document.compatMode.toLowerCase(),scrollbarsWidth:0,getDoc:function(){return(document.compatMode&&"backcompat"==document.compatMode.toLowerCase())?document.body:document.documentElement},requestAnimationFrame:window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||undefined,cancelAnimationFrame:window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||undefined,ready:false,onready:function(){if(j.browser.ready){return}var q,s;j.browser.ready=true;j.body=j.$(document.body);j.win=j.$(window);try{var r=j.$new("div").jSetCss({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999}).jAppendTo(document.body);j.browser.scrollbarsWidth=r.offsetWidth-r.clientWidth;r.jRemove()}catch(t){}try{q=j.$new("div");s=q.style;s.cssText="background:url(https://),url(https://),red url(https://)";j.browser.features.multibackground=(/(url\s*\(.*?){3}/).test(s.background);s=null;q=null}catch(t){}if(!j.browser.cssTransformProp){j.browser.cssTransformProp=j.normalizeCSS("transform").dashize()}try{q=j.$new("div");q.style.cssText=j.normalizeCSS("filter").dashize()+":blur(2px);";j.browser.features.cssFilters=!!q.style.length&&(!j.browser.ieMode||j.browser.ieMode>9);q=null}catch(t){}if(!j.browser.features.cssFilters){j.$(document.documentElement).jAddClass("no-cssfilters-magic")}try{j.browser.features.canvas=(function(){var u=j.$new("canvas");return !!(u.getContext&&u.getContext("2d"))})()}catch(t){}if(undefined===window.TransitionEvent&&undefined!==window.WebKitTransitionEvent){c.transitionend="webkitTransitionEnd"}j.Doc.jCallEvent.call(j.$(document),"domready")}};(function(){var q=[],r,s,u;function v(){return !!(arguments.callee.caller)}switch(j.browser.engine){case"trident":if(!j.browser.version){j.browser.version=!!(window.XMLHttpRequest)?3:2}break;case"gecko":j.browser.version=(g&&g[2])?parseFloat(g[2]):0;break}j.browser[j.browser.engine]=true;if(g&&"crios"===g[1]){j.browser.uaName="chrome"}if(!!window.chrome){j.browser.chrome=true}if(g&&"opr"===g[1]){j.browser.uaName="opera";j.browser.opera=true}if("safari"===j.browser.uaName&&(e&&e[1])){j.browser.uaVersion=parseFloat(e[1])}if("android"==j.browser.platform&&j.browser.webkit&&(e&&e[1])){j.browser.androidBrowser=true}r=({gecko:["-moz-","Moz","moz"],webkit:["-webkit-","Webkit","webkit"],trident:["-ms-","ms","ms"],presto:["-o-","O","o"]})[j.browser.engine]||["","",""];j.browser.cssPrefix=r[0];j.browser.cssDomPrefix=r[1];j.browser.domPrefix=r[2];j.browser.ieMode=(!j.browser.trident)?undefined:(document.documentMode)?document.documentMode:function(){var w=0;if(j.browser.backCompat){return 5}switch(j.browser.version){case 2:w=6;break;case 3:w=7;break}return w}();q.push(j.browser.platform+"-magic");if(j.browser.mobile){q.push("mobile-magic")}if(j.browser.androidBrowser){q.push("android-browser-magic")}if(j.browser.ieMode){j.browser.uaName="ie";j.browser.uaVersion=j.browser.ieMode;q.push("ie"+j.browser.ieMode+"-magic");for(s=11;s>j.browser.ieMode;s--){q.push("lt-ie"+s+"-magic")}}if(j.browser.webkit&&j.browser.version<536){j.browser.features.fullScreen=false}if(j.browser.requestAnimationFrame){j.browser.requestAnimationFrame.call(window,function(){j.browser.features.requestAnimationFrame=true})}if(j.browser.features.svg){q.push("svg-magic")}else{q.push("no-svg-magic")}u=(document.documentElement.className||"").match(/\S+/g)||[];document.documentElement.className=j.$(u).concat(q).join(" ");try{document.documentElement.setAttribute("data-magic-ua",j.browser.uaName);document.documentElement.setAttribute("data-magic-ua-ver",j.browser.uaVersion)}catch(t){}if(j.browser.ieMode&&j.browser.ieMode<9){document.createElement("figure");document.createElement("figcaption")}})();(function(){j.browser.fullScreen={capable:j.browser.features.fullScreen,enabled:function(){return !!(document.fullscreenElement||document[j.browser.domPrefix+"FullscreenElement"]||document.fullScreen||document.webkitIsFullScreen||document[j.browser.domPrefix+"FullScreen"])},request:function(r,q){q||(q={});if(this.capable){j.$(document).jAddEvent(this.changeEventName,this.onchange=function(s){if(this.enabled()){q.onEnter&&q.onEnter()}else{j.$(document).jRemoveEvent(this.changeEventName,this.onchange);q.onExit&&q.onExit()}}.jBindAsEvent(this));j.$(document).jAddEvent(this.errorEventName,this.onerror=function(s){q.fallback&&q.fallback();j.$(document).jRemoveEvent(this.errorEventName,this.onerror)}.jBindAsEvent(this));(r[j.browser.domPrefix+"RequestFullscreen"]||r[j.browser.domPrefix+"RequestFullScreen"]||r.requestFullscreen||function(){}).call(r)}else{if(q.fallback){q.fallback()}}},cancel:(document.exitFullscreen||document.cancelFullScreen||document[j.browser.domPrefix+"ExitFullscreen"]||document[j.browser.domPrefix+"CancelFullScreen"]||function(){}).jBind(document),changeEventName:document.msExitFullscreen?"MSFullscreenChange":(document.exitFullscreen?"":j.browser.domPrefix)+"fullscreenchange",errorEventName:document.msExitFullscreen?"MSFullscreenError":(document.exitFullscreen?"":j.browser.domPrefix)+"fullscreenerror",prefix:j.browser.domPrefix,activeElement:null}})();var a=/\S+/g,m=/^(border(Top|Bottom|Left|Right)Width)|((padding|margin)(Top|Bottom|Left|Right))$/,h={"float":("undefined"===typeof(p.styleFloat))?"cssFloat":"styleFloat"},f={fontWeight:true,lineHeight:true,opacity:true,zIndex:true,zoom:true},n=(window.getComputedStyle)?function(r,s){var q=window.getComputedStyle(r,null);return q?q.getPropertyValue(s)||q[s]:null}:function(q,s){var r=q.currentStyle,t=null;t=r?r[s]:null;if(null==t&&q.style&&q.style[s]){t=q.style[s]}return t};function b(r){var s,q;q=(j.browser.webkit&&"filter"==r)?false:(r in p);if(!q){s=j.browser.cssDomPrefix+r.charAt(0).toUpperCase()+r.slice(1);if(s in p){return s}}return r}j.normalizeCSS=b;j.Element={jHasClass:function(q){return !(q||"").has(" ")&&(this.className||"").has(q," ")},jAddClass:function(q){var t=(this.className||"").match(a)||[],r=(q||"").match(a)||[],u=r.length,s=0;for(;s<u;s++){if(!j.$(t).contains(r[s])){t.push(r[s])}}this.className=t.join(" ");return this},jRemoveClass:function(q){var u=(this.className||"").match(a)||[],r=(q||"").match(a)||[],v=r.length,s=0,t;for(;s<v;s++){if((t=j.$(u).indexOf(r[s]))>-1){u.splice(t,1)}}this.className=q?u.join(" "):"";return this},jToggleClass:function(q){return this.jHasClass(q)?this.jRemoveClass(q):this.jAddClass(q)},jGetCss:function(r){var q=r.jCamelize(),s=null;r=h[q]||(h[q]=b(q));s=n(this,r);if("auto"===s){s=null}if(null!==s){if("opacity"==r){return j.defined(s)?parseFloat(s):1}if(m.test(r)){s=parseInt(s,10)?s:"0px"}}return s},jSetCssProp:function(s,t){var q=s.jCamelize();try{if("opacity"==s){this.jSetOpacity(t);return this}s=h[q]||(h[q]=b(q));this.style[s]=t+(("number"==j.jTypeOf(t)&&!f[q])?"px":"")}catch(r){}return this},jSetCss:function(q){for(var r in q){this.jSetCssProp(r,q[r])}return this},jGetStyles:function(){var q={};j.$A(arguments).jEach(function(r){q[r]=this.jGetCss(r)},this);return q},jSetOpacity:function(r,s){var q;s=s||false;this.style.opacity=r;r=parseInt(parseFloat(r)*100);if(s){if(0===r){if("hidden"!=this.style.visibility){this.style.visibility="hidden"}}else{if("visible"!=this.style.visibility){this.style.visibility="visible"}}}if(j.browser.ieMode&&j.browser.ieMode<9){if(!isNaN(r)){if(!~this.style.filter.indexOf("Alpha")){this.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+r+")"}else{this.style.filter=this.style.filter.replace(/Opacity=\d*/i,"Opacity="+r)}}else{this.style.filter=this.style.filter.replace(/progid:DXImageTransform.Microsoft.Alpha\(Opacity=\d*\)/i,"").jTrim();if(""===this.style.filter){this.style.removeAttribute("filter")}}}return this},setProps:function(r){for(var q in r){if("class"===q){this.jAddClass(""+r[q])}else{this.setAttribute(q,""+r[q])}}return this},jGetTransitionDuration:function(){var q=0,r=0;q=this.jGetCss("transition-duration");r=this.jGetCss("transition-delay");q=q.indexOf("ms")>-1?parseFloat(q):q.indexOf("s")>-1?parseFloat(q)*1000:0;r=r.indexOf("ms")>-1?parseFloat(r):r.indexOf("s")>-1?parseFloat(r)*1000:0;return q+r},hide:function(){return this.jSetCss({display:"none",visibility:"hidden"})},show:function(){return this.jSetCss({display:"",visibility:"visible"})},jGetSize:function(){return{width:this.offsetWidth,height:this.offsetHeight}},getInnerSize:function(q){var r=this.jGetSize();r.width-=(parseFloat(this.jGetCss("border-left-width")||0)+parseFloat(this.jGetCss("border-right-width")||0));r.height-=(parseFloat(this.jGetCss("border-top-width")||0)+parseFloat(this.jGetCss("border-bottom-width")||0));if(!q){r.width-=(parseFloat(this.jGetCss("padding-left")||0)+parseFloat(this.jGetCss("padding-right")||0));r.height-=(parseFloat(this.jGetCss("padding-top")||0)+parseFloat(this.jGetCss("padding-bottom")||0))}return r},jGetScroll:function(){return{top:this.scrollTop,left:this.scrollLeft}},jGetFullScroll:function(){var r=this,q={top:0,left:0};do{q.left+=r.scrollLeft||0;q.top+=r.scrollTop||0;r=r.parentNode}while(r);return q},jGetPosition:function(){var r=this,u=0,s=0;if(j.defined(document.documentElement.getBoundingClientRect)){var v=this.getBoundingClientRect(),t=j.$(document).jGetScroll(),q=j.browser.getDoc();return{top:v.top+t.y-q.clientTop,left:v.left+t.x-q.clientLeft}}do{u+=r.offsetLeft||0;s+=r.offsetTop||0;r=r.offsetParent}while(r&&!(/^(?:body|html)$/i).test(r.tagName));return{top:s,left:u}},jGetRect:function(){var q=this.jGetPosition();var r=this.jGetSize();return{top:q.top,bottom:q.top+r.height,left:q.left,right:q.left+r.width}},changeContent:function(q){try{this.innerHTML=q}catch(r){this.innerText=q}return this},jRemove:function(){return(this.parentNode)?this.parentNode.removeChild(this):this},kill:function(){j.$A(this.childNodes).jEach(function(q){if(3==q.nodeType||8==q.nodeType){return}j.$(q).kill()});this.jRemove();this.jClearEvents();if(this.$J_UUID){j.storage[this.$J_UUID]=null;delete j.storage[this.$J_UUID]}return null},append:function(r,q){q=q||"bottom";var s=this.firstChild;("top"==q&&s)?this.insertBefore(r,s):this.appendChild(r);return this},jAppendTo:function(r,q){var s=j.$(r).append(this,q);return this},enclose:function(q){this.append(q.parentNode.replaceChild(this,q));return this},hasChild:function(q){if("element"!==j.jTypeOf("string"==j.jTypeOf(q)?q=document.getElementById(q):q)){return false}return(this==q)?false:(this.contains&&!(j.browser.webkit419))?(this.contains(q)):(this.compareDocumentPosition)?!!(this.compareDocumentPosition(q)&16):j.$A(this.byTag(q.tagName)).contains(q)}};j.Element.jGetStyle=j.Element.jGetCss;j.Element.jSetStyle=j.Element.jSetCss;if(!window.Element){window.Element=j.$F;if(j.browser.engine.webkit){window.document.createElement("iframe")}window.Element.prototype=(j.browser.engine.webkit)?window["[[DOMElement.prototype]]"]:{}}j.implement(window.Element,{$J_TYPE:"element"});j.Doc={jGetSize:function(){if(j.browser.touchScreen||j.browser.presto925||j.browser.webkit419){return{width:window.innerWidth,height:window.innerHeight}}return{width:j.browser.getDoc().clientWidth,height:j.browser.getDoc().clientHeight}},jGetScroll:function(){return{x:window.pageXOffset||j.browser.getDoc().scrollLeft,y:window.pageYOffset||j.browser.getDoc().scrollTop}},jGetFullSize:function(){var q=this.jGetSize();return{width:Math.max(j.browser.getDoc().scrollWidth,q.width),height:Math.max(j.browser.getDoc().scrollHeight,q.height)}}};j.extend(document,{$J_TYPE:"document"});j.extend(window,{$J_TYPE:"window"});j.extend([j.Element,j.Doc],{jFetch:function(q,s){var t=j.getStorage(this.$J_UUID),r=t[q];if(undefined!==s&&undefined===r){r=t[q]=s}return(j.defined(r)?r:null)},jStore:function(r,q){var s=j.getStorage(this.$J_UUID);s[r]=q;return this},jDel:function(q){var r=j.getStorage(this.$J_UUID);delete r[q];return this}});if(!(window.HTMLElement&&window.HTMLElement.prototype&&window.HTMLElement.prototype.getElementsByClassName)){j.extend([j.Element,j.Doc],{getElementsByClassName:function(q){return j.$A(this.getElementsByTagName("*")).filter(function(s){try{return(1==s.nodeType&&s.className.has(q," "))}catch(r){}})}})}j.extend([j.Element,j.Doc],{byClass:function(){return this.getElementsByClassName(arguments[0])},byTag:function(){return this.getElementsByTagName(arguments[0])}});if(j.browser.fullScreen.capable&&!document.requestFullScreen){j.Element.requestFullScreen=function(){j.browser.fullScreen.request(this)}}j.Event={$J_TYPE:"event",isQueueStopped:j.$false,stop:function(){return this.stopDistribution().stopDefaults()},stopDistribution:function(){if(this.stopPropagation){this.stopPropagation()}else{this.cancelBubble=true}return this},stopDefaults:function(){if(this.preventDefault){this.preventDefault()}else{this.returnValue=false}return this},stopQueue:function(){this.isQueueStopped=j.$true;return this},getClientXY:function(){var q,r;q=((/touch/i).test(this.type))?this.changedTouches[0]:this;return(!j.defined(q))?{x:0,y:0}:{x:q.clientX,y:q.clientY}},jGetPageXY:function(){var q,r;q=((/touch/i).test(this.type))?this.changedTouches[0]:this;return(!j.defined(q))?{x:0,y:0}:{x:q.pageX||q.clientX+j.browser.getDoc().scrollLeft,y:q.pageY||q.clientY+j.browser.getDoc().scrollTop}},getTarget:function(){var q=this.target||this.srcElement;while(q&&3==q.nodeType){q=q.parentNode}return q},getRelated:function(){var q=null;switch(this.type){case"mouseover":case"pointerover":case"MSPointerOver":q=this.relatedTarget||this.fromElement;break;case"mouseout":case"pointerout":case"MSPointerOut":q=this.relatedTarget||this.toElement;break;default:return q}try{while(q&&3==q.nodeType){q=q.parentNode}}catch(r){q=null}return q},getButton:function(){if(!this.which&&this.button!==undefined){return(this.button&1?1:(this.button&2?3:(this.button&4?2:0)))}return this.which},isTouchEvent:function(){return(this.pointerType&&("touch"===this.pointerType||this.pointerType===this.MSPOINTER_TYPE_TOUCH))||(/touch/i).test(this.type)},isPrimaryTouch:function(){return this.pointerType?(("touch"===this.pointerType||this.MSPOINTER_TYPE_TOUCH===this.pointerType)&&this.isPrimary):1===this.changedTouches.length&&(this.targetTouches.length?this.targetTouches[0].identifier==this.changedTouches[0].identifier:true)}};j._event_add_="addEventListener";j._event_del_="removeEventListener";j._event_prefix_="";if(!document.addEventListener){j._event_add_="attachEvent";j._event_del_="detachEvent";j._event_prefix_="on"}j.Event.Custom={type:"",x:null,y:null,timeStamp:null,button:null,target:null,relatedTarget:null,$J_TYPE:"event.custom",isQueueStopped:j.$false,events:j.$([]),pushToEvents:function(r){var q=r;this.events.push(q)},stop:function(){return this.stopDistribution().stopDefaults()},stopDistribution:function(){this.events.jEach(function(q){try{q.stopDistribution()}catch(r){}});return this},stopDefaults:function(){this.events.jEach(function(q){try{q.stopDefaults()}catch(r){}});return this},stopQueue:function(){this.isQueueStopped=j.$true;return this},getClientXY:function(){return{x:this.clientX,y:this.clientY}},jGetPageXY:function(){return{x:this.x,y:this.y}},getTarget:function(){return this.target},getRelated:function(){return this.relatedTarget},getButton:function(){return this.button},getOriginalTarget:function(){return this.events.length>0?this.events[0].getTarget():undefined}};j.extend([j.Element,j.Doc],{jAddEvent:function(q,x,w,t){var u,s,y,v,r;if("string"==j.jTypeOf(q)){r=q.split(" ");if(r.length>1){q=r}}if(j.jTypeOf(q)=="array"){j.$(q).jEach(this.jAddEvent.jBindAsEvent(this,x,w,t));return this}if(!q||!x||j.jTypeOf(q)!="string"||j.jTypeOf(x)!="function"){return this}if(q=="domready"&&j.browser.ready){x.call(this);return this}q=c[q]||q;w=parseInt(w||50);if(!x.$J_EUID){x.$J_EUID=Math.floor(Math.random()*j.now())}u=j.Doc.jFetch.call(this,"_EVENTS_",{});s=u[q];if(!s){u[q]=s=j.$([]);y=this;if(j.Event.Custom[q]){j.Event.Custom[q].handler.add.call(this,t)}else{s.handle=function(z){z=j.extend(z||window.e,{$J_TYPE:"event"});j.Doc.jCallEvent.call(y,q,j.$(z))};this[j._event_add_](j._event_prefix_+q,s.handle,false)}}v={type:q,fn:x,priority:w,euid:x.$J_EUID};s.push(v);s.sort(function(z,A){return z.priority-A.priority});return this},jRemoveEvent:function(r){var t=j.Doc.jFetch.call(this,"_EVENTS_",{}),w,x,v,q,s,u;s=arguments.length>1?arguments[1]:-100;if("string"==j.jTypeOf(r)){u=r.split(" ");if(u.length>1){r=u}}if(j.jTypeOf(r)=="array"){j.$(r).jEach(this.jRemoveEvent.jBindAsEvent(this,s));return this}r=c[r]||r;if(!r||j.jTypeOf(r)!="string"||!t||!t[r]){return this}w=t[r]||[];for(v=0;v<w.length;v++){x=w[v];if(-100==s||!!s&&s.$J_EUID===x.euid){q=w.splice(v--,1)}}if(0===w.length){if(j.Event.Custom[r]){j.Event.Custom[r].handler.jRemove.call(this)}else{this[j._event_del_](j._event_prefix_+r,w.handle,false)}delete t[r]}return this},jCallEvent:function(s,q){var t=j.Doc.jFetch.call(this,"_EVENTS_",{}),v,w,u;s=c[s]||s;if(!s||j.jTypeOf(s)!="string"||!t||!t[s]){return this}try{q=j.extend(q||{},{type:s})}catch(r){}if(undefined===q.timeStamp){q.timeStamp=j.now()}v=t[s]||[];for(u=0;u<v.length&&!(q.isQueueStopped&&q.isQueueStopped());u++){v[u].fn.call(this,q)}},jRaiseEvent:function(t,u){var q=("domready"==t)?false:true,r=this,s;t=c[t]||t;if(!q){j.Doc.jCallEvent.call(this,t);return this}if(r===document&&document.createEvent&&!r.dispatchEvent){r=document.documentElement}if(document.createEvent){s=document.createEvent(t);s.initEvent(u,true,true)}else{s=document.createEventObject();s.eventType=t}if(document.createEvent){r.dispatchEvent(s)}else{r.fireEvent("on"+u,s)}return s},jClearEvents:function(){var q=j.Doc.jFetch.call(this,"_EVENTS_");if(!q){return this}for(var r in q){j.Doc.jRemoveEvent.call(this,r)}j.Doc.jDel.call(this,"_EVENTS_");return this}});(function(q){if("complete"===document.readyState){return q.browser.onready.jDelay(1)}if(q.browser.webkit&&q.browser.version<420){(function(){(q.$(["loaded","complete"]).contains(document.readyState))?q.browser.onready():arguments.callee.jDelay(50)})()}else{if(q.browser.trident&&q.browser.ieMode<9&&window==top){(function(){(q.$try(function(){q.browser.getDoc().doScroll("left");return true}))?q.browser.onready():arguments.callee.jDelay(50)})()}else{q.Doc.jAddEvent.call(q.$(document),"DOMContentLoaded",q.browser.onready);q.Doc.jAddEvent.call(q.$(window),"load",q.browser.onready)}}})(d);j.Class=function(){var q=null,t=j.$A(arguments);if("class"==j.jTypeOf(t[0])){q=t.shift()}var u=function(){for(var x in this){this[x]=j.detach(this[x])}if(this.constructor.$parent){this.$parent={};var v=this.constructor.$parent;for(var w in v){var y=v[w];switch(j.jTypeOf(y)){case"function":this.$parent[w]=j.Class.wrap(this,y);break;case"object":this.$parent[w]=j.detach(y);break;case"array":this.$parent[w]=j.detach(y);break}}}var z=(this.init)?this.init.apply(this,arguments):this;delete this.caller;return z};if(!u.prototype.init){u.prototype.init=j.$F}if(q){var r=function(){};r.prototype=q.prototype;u.prototype=new r;u.$parent={};for(var s in q.prototype){u.$parent[s]=q.prototype[s]}}else{u.$parent=null}u.constructor=j.Class;u.prototype.constructor=u;j.extend(u.prototype,t[0]);j.extend(u,{$J_TYPE:"class"});return u};d.Class.wrap=function(r,q){return function(){var s=this.caller;var t=q.apply(r,arguments);return t}};(function(q){var s=q.$;var t=5,r=300;q.Event.Custom.btnclick=new q.Class(q.extend(q.Event.Custom,{type:"btnclick",init:function(u,v){var w=v.jGetPageXY();this.x=w.x;this.y=w.y;this.clientX=v.clientX;this.clientY=v.clientY;this.timeStamp=v.timeStamp;this.button=v.getButton();this.target=u;this.pushToEvents(v)}}));q.Event.Custom.btnclick.handler={options:{threshold:r,button:1},add:function(u){this.jStore("event:btnclick:options",q.extend(q.detach(q.Event.Custom.btnclick.handler.options),u||{}));this.jAddEvent("mousedown",q.Event.Custom.btnclick.handler.handle,1);this.jAddEvent("mouseup",q.Event.Custom.btnclick.handler.handle,1);this.jAddEvent("click",q.Event.Custom.btnclick.handler.onclick,1);if(q.browser.trident&&q.browser.ieMode<9){this.jAddEvent("dblclick",q.Event.Custom.btnclick.handler.handle,1)}},jRemove:function(){this.jRemoveEvent("mousedown",q.Event.Custom.btnclick.handler.handle);this.jRemoveEvent("mouseup",q.Event.Custom.btnclick.handler.handle);this.jRemoveEvent("click",q.Event.Custom.btnclick.handler.onclick);if(q.browser.trident&&q.browser.ieMode<9){this.jRemoveEvent("dblclick",q.Event.Custom.btnclick.handler.handle)}},onclick:function(u){u.stopDefaults()},handle:function(u){var v,x,w;x=this.jFetch("event:btnclick:options");if(u.type!="dblclick"&&u.getButton()!=x.button){return}if(this.jFetch("event:btnclick:ignore")){this.jDel("event:btnclick:ignore");return}if("mousedown"==u.type){v=new q.Event.Custom.btnclick(this,u);this.jStore("event:btnclick:btnclickEvent",v)}else{if("mouseup"==u.type){v=this.jFetch("event:btnclick:btnclickEvent");if(!v){return}w=u.jGetPageXY();this.jDel("event:btnclick:btnclickEvent");v.pushToEvents(u);if(u.timeStamp-v.timeStamp<=x.threshold&&Math.sqrt(Math.pow(w.x-v.x,2)+Math.pow(w.y-v.y,2))<=t){this.jCallEvent("btnclick",v)}document.jCallEvent("mouseup",u)}else{if(u.type=="dblclick"){v=new q.Event.Custom.btnclick(this,u);this.jCallEvent("btnclick",v)}}}}}})(d);(function(q){var r=q.$;q.Event.Custom.mousedrag=new q.Class(q.extend(q.Event.Custom,{type:"mousedrag",state:"dragstart",dragged:false,init:function(s,t,u){var v=t.jGetPageXY();this.x=v.x;this.y=v.y;this.clientX=t.clientX;this.clientY=t.clientY;this.timeStamp=t.timeStamp;this.button=t.getButton();this.target=s;this.pushToEvents(t);this.state=u}}));q.Event.Custom.mousedrag.handler={add:function(){var s=q.Event.Custom.mousedrag.handler.handleMouseMove.jBindAsEvent(this),t=q.Event.Custom.mousedrag.handler.handleMouseUp.jBindAsEvent(this);this.jAddEvent("mousedown",q.Event.Custom.mousedrag.handler.handleMouseDown,1);this.jAddEvent("mouseup",q.Event.Custom.mousedrag.handler.handleMouseUp,1);document.jAddEvent("mousemove",s,1);document.jAddEvent("mouseup",t,1);this.jStore("event:mousedrag:listeners:document:move",s);this.jStore("event:mousedrag:listeners:document:end",t)},jRemove:function(){this.jRemoveEvent("mousedown",q.Event.Custom.mousedrag.handler.handleMouseDown);this.jRemoveEvent("mouseup",q.Event.Custom.mousedrag.handler.handleMouseUp);r(document).jRemoveEvent("mousemove",this.jFetch("event:mousedrag:listeners:document:move")||q.$F);r(document).jRemoveEvent("mouseup",this.jFetch("event:mousedrag:listeners:document:end")||q.$F);this.jDel("event:mousedrag:listeners:document:move");this.jDel("event:mousedrag:listeners:document:end")},handleMouseDown:function(s){var t;if(1!=s.getButton()){return}t=new q.Event.Custom.mousedrag(this,s,"dragstart");this.jStore("event:mousedrag:dragstart",t)},handleMouseUp:function(s){var t;t=this.jFetch("event:mousedrag:dragstart");if(!t){return}s.stopDefaults();t=new q.Event.Custom.mousedrag(this,s,"dragend");this.jDel("event:mousedrag:dragstart");this.jCallEvent("mousedrag",t)},handleMouseMove:function(s){var t;t=this.jFetch("event:mousedrag:dragstart");if(!t){return}s.stopDefaults();if(!t.dragged){t.dragged=true;this.jCallEvent("mousedrag",t)}t=new q.Event.Custom.mousedrag(this,s,"dragmove");this.jCallEvent("mousedrag",t)}}})(d);(function(q){var r=q.$;q.Event.Custom.dblbtnclick=new q.Class(q.extend(q.Event.Custom,{type:"dblbtnclick",timedout:false,tm:null,init:function(s,t){var u=t.jGetPageXY();this.x=u.x;this.y=u.y;this.clientX=t.clientX;this.clientY=t.clientY;this.timeStamp=t.timeStamp;this.button=t.getButton();this.target=s;this.pushToEvents(t)}}));q.Event.Custom.dblbtnclick.handler={options:{threshold:200},add:function(s){this.jStore("event:dblbtnclick:options",q.extend(q.detach(q.Event.Custom.dblbtnclick.handler.options),s||{}));this.jAddEvent("btnclick",q.Event.Custom.dblbtnclick.handler.handle,1)},jRemove:function(){this.jRemoveEvent("btnclick",q.Event.Custom.dblbtnclick.handler.handle)},handle:function(s){var t,u;t=this.jFetch("event:dblbtnclick:event");u=this.jFetch("event:dblbtnclick:options");if(!t){t=new q.Event.Custom.dblbtnclick(this,s);t.tm=setTimeout(function(){t.timedout=true;s.isQueueStopped=q.$false;this.jCallEvent("btnclick",s);this.jDel("event:dblbtnclick:event")}.jBind(this),u.threshold+10);this.jStore("event:dblbtnclick:event",t);s.stopQueue()}else{clearTimeout(t.tm);this.jDel("event:dblbtnclick:event");if(!t.timedout){t.pushToEvents(s);s.stopQueue().stop();this.jCallEvent("dblbtnclick",t)}else{}}}}})(d);(function(q){var r=q.$;function w(x){return x.pointerType?(("touch"===x.pointerType||x.MSPOINTER_TYPE_TOUCH===x.pointerType)&&x.isPrimary):1===x.changedTouches.length&&(x.targetTouches.length?x.targetTouches[0].identifier==x.changedTouches[0].identifier:true)}function v(x){if(x.pointerType){return("touch"===x.pointerType||x.MSPOINTER_TYPE_TOUCH===x.pointerType)?x.pointerId:null}else{return x.changedTouches[0].identifier}}function t(x){if(x.pointerType){return("touch"===x.pointerType||x.MSPOINTER_TYPE_TOUCH===x.pointerType)?x:null}else{return x.changedTouches[0]}}q.Event.Custom.tap=new q.Class(q.extend(q.Event.Custom,{type:"tap",id:null,init:function(y,z){var x=t(z);this.id=x.pointerId||x.identifier;this.x=x.pageX;this.y=x.pageY;this.pageX=x.pageX;this.pageY=x.pageY;this.clientX=x.clientX;this.clientY=x.clientY;this.timeStamp=z.timeStamp;this.button=0;this.target=y;this.pushToEvents(z)}}));var u=10,s=200;q.Event.Custom.tap.handler={add:function(x){this.jAddEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],q.Event.Custom.tap.handler.onTouchStart,1);this.jAddEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],q.Event.Custom.tap.handler.onTouchEnd,1);this.jAddEvent("click",q.Event.Custom.tap.handler.onClick,1)},jRemove:function(){this.jRemoveEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],q.Event.Custom.tap.handler.onTouchStart);this.jRemoveEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],q.Event.Custom.tap.handler.onTouchEnd);this.jRemoveEvent("click",q.Event.Custom.tap.handler.onClick)},onClick:function(x){x.stopDefaults()},onTouchStart:function(x){if(!w(x)){this.jDel("event:tap:event");return}this.jStore("event:tap:event",new q.Event.Custom.tap(this,x));this.jStore("event:btnclick:ignore",true)},onTouchEnd:function(x){var z=q.now(),y=this.jFetch("event:tap:event"),A=this.jFetch("event:tap:options");if(!y||!w(x)){return}this.jDel("event:tap:event");if(y.id==v(x)&&x.timeStamp-y.timeStamp<=s&&Math.sqrt(Math.pow(t(x).pageX-y.x,2)+Math.pow(t(x).pageY-y.y,2))<=u){this.jDel("event:btnclick:btnclickEvent");x.stop();y.pushToEvents(x);this.jCallEvent("tap",y)}}}})(d);j.Event.Custom.dbltap=new j.Class(j.extend(j.Event.Custom,{type:"dbltap",timedout:false,tm:null,init:function(q,r){this.x=r.x;this.y=r.y;this.clientX=r.clientX;this.clientY=r.clientY;this.timeStamp=r.timeStamp;this.button=0;this.target=q;this.pushToEvents(r)}}));j.Event.Custom.dbltap.handler={options:{threshold:300},add:function(q){this.jStore("event:dbltap:options",j.extend(j.detach(j.Event.Custom.dbltap.handler.options),q||{}));this.jAddEvent("tap",j.Event.Custom.dbltap.handler.handle,1)},jRemove:function(){this.jRemoveEvent("tap",j.Event.Custom.dbltap.handler.handle)},handle:function(r){var q,s;q=this.jFetch("event:dbltap:event");s=this.jFetch("event:dbltap:options");if(!q){q=new j.Event.Custom.dbltap(this,r);q.tm=setTimeout(function(){q.timedout=true;r.isQueueStopped=j.$false;this.jCallEvent("tap",r)}.jBind(this),s.threshold+10);this.jStore("event:dbltap:event",q);r.stopQueue()}else{clearTimeout(q.tm);this.jDel("event:dbltap:event");if(!q.timedout){q.pushToEvents(r);r.stopQueue().stop();this.jCallEvent("dbltap",q)}else{}}}};(function(q){var r=q.$;function v(w){return w.pointerType?(("touch"===w.pointerType||w.MSPOINTER_TYPE_TOUCH===w.pointerType)&&w.isPrimary):1===w.changedTouches.length&&(w.targetTouches.length?w.targetTouches[0].identifier==w.changedTouches[0].identifier:true)}function u(w){if(w.pointerType){return("touch"===w.pointerType||w.MSPOINTER_TYPE_TOUCH===w.pointerType)?w.pointerId:null}else{return w.changedTouches[0].identifier}}function s(w){if(w.pointerType){return("touch"===w.pointerType||w.MSPOINTER_TYPE_TOUCH===w.pointerType)?w:null}else{return w.changedTouches[0]}}var t=10;q.Event.Custom.touchdrag=new q.Class(q.extend(q.Event.Custom,{type:"touchdrag",state:"dragstart",id:null,dragged:false,init:function(x,y,z){var w=s(y);this.id=w.pointerId||w.identifier;this.clientX=w.clientX;this.clientY=w.clientY;this.pageX=w.pageX;this.pageY=w.pageY;this.x=w.pageX;this.y=w.pageY;this.timeStamp=y.timeStamp;this.button=0;this.target=x;this.pushToEvents(y);this.state=z}}));q.Event.Custom.touchdrag.handler={add:function(){var w=q.Event.Custom.touchdrag.handler.onTouchMove.jBind(this),x=q.Event.Custom.touchdrag.handler.onTouchEnd.jBind(this);this.jAddEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],q.Event.Custom.touchdrag.handler.onTouchStart,1);this.jAddEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],q.Event.Custom.touchdrag.handler.onTouchEnd,1);this.jAddEvent(["touchmove",window.navigator.pointerEnabled?"pointermove":"MSPointerMove"],q.Event.Custom.touchdrag.handler.onTouchMove,1);this.jStore("event:touchdrag:listeners:document:move",w);this.jStore("event:touchdrag:listeners:document:end",x);r(document).jAddEvent(window.navigator.pointerEnabled?"pointermove":"MSPointerMove",w,1);r(document).jAddEvent(window.navigator.pointerEnabled?"pointerup":"MSPointerUp",x,1)},jRemove:function(){this.jRemoveEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],q.Event.Custom.touchdrag.handler.onTouchStart);this.jRemoveEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],q.Event.Custom.touchdrag.handler.onTouchEnd);this.jRemoveEvent(["touchmove",window.navigator.pointerEnabled?"pointermove":"MSPointerMove"],q.Event.Custom.touchdrag.handler.onTouchMove);r(document).jRemoveEvent(window.navigator.pointerEnabled?"pointermove":"MSPointerMove",this.jFetch("event:touchdrag:listeners:document:move")||q.$F,1);r(document).jRemoveEvent(window.navigator.pointerEnabled?"pointerup":"MSPointerUp",this.jFetch("event:touchdrag:listeners:document:end")||q.$F,1);this.jDel("event:touchdrag:listeners:document:move");this.jDel("event:touchdrag:listeners:document:end")},onTouchStart:function(w){var x;if(!v(w)){return}x=new q.Event.Custom.touchdrag(this,w,"dragstart");this.jStore("event:touchdrag:dragstart",x)},onTouchEnd:function(w){var x;x=this.jFetch("event:touchdrag:dragstart");if(!x||!x.dragged||x.id!=u(w)){return}x=new q.Event.Custom.touchdrag(this,w,"dragend");this.jDel("event:touchdrag:dragstart");this.jCallEvent("touchdrag",x)},onTouchMove:function(w){var x;x=this.jFetch("event:touchdrag:dragstart");if(!x||!v(w)){return}if(x.id!=u(w)){this.jDel("event:touchdrag:dragstart");return}if(!x.dragged&&Math.sqrt(Math.pow(s(w).pageX-x.x,2)+Math.pow(s(w).pageY-x.y,2))>t){x.dragged=true;this.jCallEvent("touchdrag",x)}if(!x.dragged){return}x=new q.Event.Custom.touchdrag(this,w,"dragmove");this.jCallEvent("touchdrag",x)}}})(d);j.Event.Custom.touchpinch=new j.Class(j.extend(j.Event.Custom,{type:"touchpinch",scale:1,previousScale:1,curScale:1,state:"pinchstart",init:function(q,r){this.timeStamp=r.timeStamp;this.button=0;this.target=q;this.x=r.touches[0].clientX+(r.touches[1].clientX-r.touches[0].clientX)/2;this.y=r.touches[0].clientY+(r.touches[1].clientY-r.touches[0].clientY)/2;this._initialDistance=Math.sqrt(Math.pow(r.touches[0].clientX-r.touches[1].clientX,2)+Math.pow(r.touches[0].clientY-r.touches[1].clientY,2));this.pushToEvents(r)},update:function(r){var q;this.state="pinchupdate";if(r.changedTouches[0].identifier!=this.events[0].touches[0].identifier||r.changedTouches[1].identifier!=this.events[0].touches[1].identifier){return}q=Math.sqrt(Math.pow(r.changedTouches[0].clientX-r.changedTouches[1].clientX,2)+Math.pow(r.changedTouches[0].clientY-r.changedTouches[1].clientY,2));this.previousScale=this.scale;this.scale=q/this._initialDistance;this.curScale=this.scale/this.previousScale;this.x=r.changedTouches[0].clientX+(r.changedTouches[1].clientX-r.changedTouches[0].clientX)/2;this.y=r.changedTouches[0].clientY+(r.changedTouches[1].clientY-r.changedTouches[0].clientY)/2;this.pushToEvents(r)}}));j.Event.Custom.touchpinch.handler={add:function(){this.jAddEvent("touchstart",j.Event.Custom.touchpinch.handler.handleTouchStart,1);this.jAddEvent("touchend",j.Event.Custom.touchpinch.handler.handleTouchEnd,1);this.jAddEvent("touchmove",j.Event.Custom.touchpinch.handler.handleTouchMove,1)},jRemove:function(){this.jRemoveEvent("touchstart",j.Event.Custom.touchpinch.handler.handleTouchStart);this.jRemoveEvent("touchend",j.Event.Custom.touchpinch.handler.handleTouchEnd);this.jRemoveEvent("touchmove",j.Event.Custom.touchpinch.handler.handleTouchMove)},handleTouchStart:function(q){var r;if(q.touches.length!=2){return}q.stopDefaults();r=new j.Event.Custom.touchpinch(this,q);this.jStore("event:touchpinch:event",r)},handleTouchEnd:function(q){var r;r=this.jFetch("event:touchpinch:event");if(!r){return}q.stopDefaults();this.jDel("event:touchpinch:event")},handleTouchMove:function(q){var r;r=this.jFetch("event:touchpinch:event");if(!r){return}q.stopDefaults();r.update(q);this.jCallEvent("touchpinch",r)}};(function(q){var s=q.$;q.Event.Custom.mousescroll=new q.Class(q.extend(q.Event.Custom,{type:"mousescroll",init:function(D,w,B,z,A,C,y){var x=w.jGetPageXY();this.x=x.x;this.y=x.y;this.timeStamp=w.timeStamp;this.target=D;this.delta=B||0;this.deltaX=z||0;this.deltaY=A||0;this.deltaZ=C||0;this.deltaFactor=y||0;this.deltaMode=w.deltaMode||0;this.isMouse=false;this.pushToEvents(w)}}));var r,u;function v(){r=null}function t(x,w){return(x>50)||(1===w&&!("win"==q.browser.platform&&x<1))||(0===x%12)||(0==x%4.000244140625)}q.Event.Custom.mousescroll.handler={eventType:"onwheel" in document||q.browser.ieMode>8?"wheel":"mousewheel",add:function(){this.jAddEvent(q.Event.Custom.mousescroll.handler.eventType,q.Event.Custom.mousescroll.handler.handle,1)},jRemove:function(){this.jRemoveEvent(q.Event.Custom.mousescroll.handler.eventType,q.Event.Custom.mousescroll.handler.handle,1)},handle:function(C){var B=0,x=0,z=0,A=0,w,y;if(C.detail){z=C.detail*-1}if(C.wheelDelta!==undefined){z=C.wheelDelta}if(C.wheelDeltaY!==undefined){z=C.wheelDeltaY}if(C.wheelDeltaX!==undefined){x=C.wheelDeltaX*-1}if(C.deltaY){z=-1*C.deltaY}if(C.deltaX){x=C.deltaX}if(0===z&&0===x){return}B=0===z?x:z;A=Math.max(Math.abs(z),Math.abs(x));if(!r||A<r){r=A}w=B>0?"floor":"ceil";B=Math[w](B/r);x=Math[w](x/r);z=Math[w](z/r);if(u){clearTimeout(u)}u=setTimeout(v,200);y=new q.Event.Custom.mousescroll(this,C,B,x,z,0,r);y.isMouse=t(r,C.deltaMode||0);this.jCallEvent("mousescroll",y)}}})(d);j.win=j.$(window);j.doc=j.$(document);return d})();(function(a){if(!a){throw"MagicJS not found"}var b=a.$;var c=window.URL||window.webkitURL||null;K.ImageLoader=new a.Class({img:null,ready:false,options:{onprogress:a.$F,onload:a.$F,onabort:a.$F,onerror:a.$F,oncomplete:a.$F,onxhrerror:a.$F,xhr:false,progressiveLoad:true},size:null,_timer:null,loadedBytes:0,_handlers:{onprogress:function(d){if(d.target&&(200===d.target.status||304===d.target.status)&&d.lengthComputable){this.options.onprogress.jBind(null,(d.loaded-(this.options.progressiveLoad?this.loadedBytes:0))/d.total).jDelay(1);this.loadedBytes=d.loaded}},onload:function(d){if(d){b(d).stop()}this._unbind();if(this.ready){return}this.ready=true;this._cleanup();!this.options.xhr&&this.options.onprogress.jBind(null,1).jDelay(1);this.options.onload.jBind(null,this).jDelay(1);this.options.oncomplete.jBind(null,this).jDelay(1)},onabort:function(d){if(d){b(d).stop()}this._unbind();this.ready=false;this._cleanup();this.options.onabort.jBind(null,this).jDelay(1);this.options.oncomplete.jBind(null,this).jDelay(1)},onerror:function(d){if(d){b(d).stop()}this._unbind();this.ready=false;this._cleanup();this.options.onerror.jBind(null,this).jDelay(1);this.options.oncomplete.jBind(null,this).jDelay(1)}},_bind:function(){b(["load","abort","error"]).jEach(function(d){this.img.jAddEvent(d,this._handlers["on"+d].jBindAsEvent(this).jDefer(1))},this)},_unbind:function(){if(this._timer){try{clearTimeout(this._timer)}catch(d){}this._timer=null}b(["load","abort","error"]).jEach(function(e){this.img.jRemoveEvent(e)},this)},_cleanup:function(){this.jGetSize();if(this.img.jFetch("new")){var d=this.img.parentNode;this.img.jRemove().jDel("new").jSetCss({position:"static",top:"auto"});d.kill()}},loadBlob:function(f){var e=new XMLHttpRequest(),d;b(["abort","progress"]).jEach(function(g){e["on"+g]=b(function(h){this._handlers["on"+g].call(this,h)}).jBind(this)},this);e.onerror=b(function(){this.options.onxhrerror.jBind(null,this).jDelay(1);this.options.xhr=false;this._bind();this.img.src=f}).jBind(this);e.onload=b(function(){if(200!==e.status&&304!==e.status){this._handlers.onerror.call(this);return}d=e.response;this._bind();if(c&&!a.browser.trident&&!("ios"===a.browser.platform&&a.browser.version<537)){this.img.setAttribute("src",c.createObjectURL(d))}else{this.img.src=f}}).jBind(this);e.open("GET",f);e.responseType="blob";e.send()},init:function(f,d){this.options=a.extend(this.options,d);this.img=b(f)||a.$new("img",{},{"max-width":"none","max-height":"none"}).jAppendTo(a.$new("div").jAddClass("magic-temporary-img").jSetCss({position:"absolute",top:-10000,width:10,height:10,overflow:"hidden"}).jAppendTo(document.body)).jStore("new",true);if(a.browser.features.xhr2&&this.options.xhr&&"string"==a.jTypeOf(f)){this.loadBlob(f);return}var e=function(){if(this.isReady()){this._handlers.onload.call(this)}else{this._handlers.onerror.call(this)}e=null}.jBind(this);this._bind();if("string"==a.jTypeOf(f)){this.img.src=f}else{if(a.browser.trident&&5==a.browser.version&&a.browser.ieMode<9){this.img.onreadystatechange=function(){if(/loaded|complete/.test(this.img.readyState)){this.img.onreadystatechange=null;e&&e()}}.jBind(this)}this.img.src=f.getAttribute("src")}this.img&&this.img.complete&&e&&(this._timer=e.jDelay(100))},destroy:function(){this._unbind();this._cleanup();this.ready=false;return this},isReady:function(){var d=this.img;return(d.naturalWidth)?(d.naturalWidth>0):(d.readyState)?("complete"==d.readyState):d.width>0},jGetSize:function(){return this.size||(this.size={width:this.img.naturalWidth||this.img.width,height:this.img.naturalHeight||this.img.height})}})})(K);(function(a){if(!a){throw"MagicJS not found"}if(a.FX){return}var b=a.$;a.FX=new a.Class({init:function(c,d){var e;this.el=a.$(c);this.options=a.extend(this.options,d);this.timer=false;this.easeFn=this.cubicBezierAtTime;e=a.FX.Transition[this.options.transition]||this.options.transition;if("function"===a.jTypeOf(e)){this.easeFn=e}else{this.cubicBezier=this.parseCubicBezier(e)||this.parseCubicBezier("ease")}if("string"==a.jTypeOf(this.options.cycles)){this.options.cycles="infinite"===this.options.cycles?Infinity:parseInt(this.options.cycles)||1}},options:{fps:60,duration:600,transition:"ease",cycles:1,direction:"normal",onStart:a.$F,onComplete:a.$F,onBeforeRender:a.$F,onAfterRender:a.$F,forceAnimation:false,roundCss:false},styles:null,cubicBezier:null,easeFn:null,setTransition:function(c){this.options.transition=c;c=a.FX.Transition[this.options.transition]||this.options.transition;if("function"===a.jTypeOf(c)){this.easeFn=c}else{this.easeFn=this.cubicBezierAtTime;this.cubicBezier=this.parseCubicBezier(c)||this.parseCubicBezier("ease")}},start:function(e){var d=/\%$/,c;this.styles=e||{};this.cycle=0;this.state=0;this.curFrame=0;this.pStyles={};this.alternate="alternate"===this.options.direction||"alternate-reverse"===this.options.direction;this.continuous="continuous"===this.options.direction||"continuous-reverse"===this.options.direction;for(c in this.styles){d.test(this.styles[c][0])&&(this.pStyles[c]=true);if("reverse"===this.options.direction||"alternate-reverse"===this.options.direction||"continuous-reverse"===this.options.direction){this.styles[c].reverse()}}this.startTime=a.now();this.finishTime=this.startTime+this.options.duration;this.options.onStart.call();if(0===this.options.duration){this.render(1);this.options.onComplete.call()}else{this.loopBind=this.loop.jBind(this);if(!this.options.forceAnimation&&a.browser.features.requestAnimationFrame){this.timer=a.browser.requestAnimationFrame.call(window,this.loopBind)}else{this.timer=this.loopBind.interval(Math.round(1000/this.options.fps))}}return this},stopAnimation:function(){if(this.timer){if(!this.options.forceAnimation&&a.browser.features.requestAnimationFrame&&a.browser.cancelAnimationFrame){a.browser.cancelAnimationFrame.call(window,this.timer)}else{clearInterval(this.timer)}this.timer=false}},stop:function(c){c=a.defined(c)?c:false;this.stopAnimation();if(c){this.render(1);this.options.onComplete.jDelay(10)}return this},calc:function(e,c,d){e=parseFloat(e);c=parseFloat(c);return(c-e)*d+e},loop:function(){var c=a.now(),d=(c-this.startTime)/this.options.duration,f=Math.floor(d);if(c>=this.finishTime&&f>=this.options.cycles){this.stopAnimation();this.render(1);this.options.onComplete.jDelay(10);return this}if(this.alternate&&this.cycle<f){for(var e in this.styles){this.styles[e].reverse()}}this.cycle=f;if(!this.options.forceAnimation&&a.browser.features.requestAnimationFrame){this.timer=a.browser.requestAnimationFrame.call(window,this.loopBind)}this.render((this.continuous?f:0)+this.easeFn(d%1))},render:function(d){var c={},e=d;for(var f in this.styles){if("opacity"===f){c[f]=Math.round(this.calc(this.styles[f][0],this.styles[f][1],d)*100)/100}else{c[f]=this.calc(this.styles[f][0],this.styles[f][1],d);this.pStyles[f]&&(c[f]+="%")}}this.options.onBeforeRender(c,this.el);this.set(c);this.options.onAfterRender(c,this.el)},set:function(c){return this.el.jSetCss(c)},parseCubicBezier:function(d){var c,e=null;if("string"!==a.jTypeOf(d)){return null}switch(d){case"linear":e=b([0,0,1,1]);break;case"ease":e=b([0.25,0.1,0.25,1]);break;case"ease-in":e=b([0.42,0,1,1]);break;case"ease-out":e=b([0,0,0.58,1]);break;case"ease-in-out":e=b([0.42,0,0.58,1]);break;case"easeInSine":e=b([0.47,0,0.745,0.715]);break;case"easeOutSine":e=b([0.39,0.575,0.565,1]);break;case"easeInOutSine":e=b([0.445,0.05,0.55,0.95]);break;case"easeInQuad":e=b([0.55,0.085,0.68,0.53]);break;case"easeOutQuad":e=b([0.25,0.46,0.45,0.94]);break;case"easeInOutQuad":e=b([0.455,0.03,0.515,0.955]);break;case"easeInCubic":e=b([0.55,0.055,0.675,0.19]);break;case"easeOutCubic":e=b([0.215,0.61,0.355,1]);break;case"easeInOutCubic":e=b([0.645,0.045,0.355,1]);break;case"easeInQuart":e=b([0.895,0.03,0.685,0.22]);break;case"easeOutQuart":e=b([0.165,0.84,0.44,1]);break;case"easeInOutQuart":e=b([0.77,0,0.175,1]);break;case"easeInQuint":e=b([0.755,0.05,0.855,0.06]);break;case"easeOutQuint":e=b([0.23,1,0.32,1]);break;case"easeInOutQuint":e=b([0.86,0,0.07,1]);break;case"easeInExpo":e=b([0.95,0.05,0.795,0.035]);break;case"easeOutExpo":e=b([0.19,1,0.22,1]);break;case"easeInOutExpo":e=b([1,0,0,1]);break;case"easeInCirc":e=b([0.6,0.04,0.98,0.335]);break;case"easeOutCirc":e=b([0.075,0.82,0.165,1]);break;case"easeInOutCirc":e=b([0.785,0.135,0.15,0.86]);break;case"easeInBack":e=b([0.6,-0.28,0.735,0.045]);break;case"easeOutBack":e=b([0.175,0.885,0.32,1.275]);break;case"easeInOutBack":e=b([0.68,-0.55,0.265,1.55]);break;default:d=d.replace(/\s/g,"");if(d.match(/^cubic-bezier\((?:-?[0-9\.]{0,}[0-9]{1,},){3}(?:-?[0-9\.]{0,}[0-9]{1,})\)$/)){e=d.replace(/^cubic-bezier\s*\(|\)$/g,"").split(",");for(c=e.length-1;c>=0;c--){e[c]=parseFloat(e[c])}}}return b(e)},cubicBezierAtTime:function(d){var p=0,e=0,h=0,c=0,f=0,j=0,i=this.options.duration;function k(q){return((p*q+e)*q+h)*q}function l(q){return((c*q+f)*q+j)*q}function n(q){return(3*p*q+2*e)*q+h}function g(q){return 1/(200*q)}function o(r,q){return l(m(r,q))}function m(u,t){var v,w,x,r,s,y;function q(z){if(z>=0){return z}else{return 0-z}}for(x=u,y=0;y<8;y++){r=k(x)-u;if(q(r)<t){return x}s=n(x);if(q(s)<0.000001){break}x=x-r/s}v=0;w=1;x=u;if(x<v){return v}if(x>w){return w}while(v<w){r=k(x);if(q(r-u)<t){return x}if(u>r){v=x}else{w=x}x=(w-v)*0.5+v}return x}h=3*this.cubicBezier[0];e=3*(this.cubicBezier[2]-this.cubicBezier[0])-h;p=1-h-e;j=3*this.cubicBezier[1];f=3*(this.cubicBezier[3]-this.cubicBezier[1])-j;c=1-j-f;return o(d,g(i))}});a.FX.Transition={linear:"linear",sineIn:"easeInSine",sineOut:"easeOutSine",expoIn:"easeInExpo",expoOut:"easeOutExpo",quadIn:"easeInQuad",quadOut:"easeOutQuad",cubicIn:"easeInCubic",cubicOut:"easeOutCubic",backIn:"easeInBack",backOut:"easeOutBack",elasticIn:function(c,d){d=d||[];return Math.pow(2,10*--c)*Math.cos(20*c*Math.PI*(d[0]||1)/3)},elasticOut:function(c,d){return 1-a.FX.Transition.elasticIn(1-c,d)},bounceIn:function(e){for(var c=0,d=1;1;c+=d,d/=2){if(e>=(7-4*c)/11){return d*d-Math.pow((11-6*c-11*e)/4,2)}}},bounceOut:function(c){return 1-a.FX.Transition.bounceIn(1-c)},none:function(c){return 0}}})(K);(function(a){if(!a){throw"MagicJS not found"}if(a.PFX){return}var b=a.$;a.PFX=new a.Class(a.FX,{init:function(d,c){this.el_arr=d;this.options=a.extend(this.options,c);this.timer=false;this.$parent.init()},start:function(e){var d=/\%$/,f,g,c=e.length;this.styles_arr=e;this.pStyles_arr=new Array(c);for(g=0;g<c;g++){this.pStyles_arr[g]={};for(f in e[g]){d.test(e[g][f][0])&&(this.pStyles_arr[g][f]=true);if("reverse"===this.options.direction||"alternate-reverse"===this.options.direction||"continuous-reverse"===this.options.direction){this.styles_arr[g][f].reverse()}}}this.$parent.start({});return this},render:function(d){for(var c=0;c<this.el_arr.length;c++){this.el=a.$(this.el_arr[c]);this.styles=this.styles_arr[c];this.pStyles=this.pStyles_arr[c];this.$parent.render(d)}}})})(K);(function(a){if(!a){throw"MagicJS not found";return}if(a.Tooltip){return}var b=a.$;a.Tooltip=function(c,e){var d=this.tooltip=a.$new("div",null,{position:"absolute","z-index":999}).jAddClass("MagicToolboxTooltip");a.$(c).jAddEvent("mouseover",function(){d.jAppendTo(document.body)});a.$(c).jAddEvent("mouseout",function(){d.jRemove()});a.$(c).jAddEvent("mousemove",function(h){var f=20,i=a.$(h).jGetPageXY(),j=d.jGetSize(),k=a.$(window).jGetSize(),g=a.$(window).jGetScroll();function l(m,o,n){return(n<(m-o)/2)?n:((n>(m+o)/2)?(n-o):(m-o)/2)}d.jSetCss({left:g.x+l(k.width,j.width+2*f,i.x-g.x)+f,top:g.y+l(k.height,j.height+2*f,i.y-g.y)+f})});this.text(e)};a.Tooltip.prototype.text=function(c){this.tooltip.firstChild&&this.tooltip.removeChild(this.tooltip.firstChild);this.tooltip.append(document.createTextNode(c))}})(K);(function(a){if(!a){throw"MagicJS not found";return}if(a.MessageBox){return}var b=a.$;a.Message=function(e,f,c,d){this.hideTimer=null;this.messageBox=a.$new("span",null,{position:"absolute","z-index":999,visibility:"hidden",opacity:0.8}).jAddClass(d||"").jAppendTo(c||document.body);this.setMessage(e);this.show(f)};a.Message.prototype.show=function(c){this.messageBox.show();this.hideTimer=this.hide.jBind(this).jDelay(a.ifndef(c,5000))};a.Message.prototype.hide=function(c){clearTimeout(this.hideTimer);this.hideTimer=null;if(this.messageBox&&!this.hideFX){this.hideFX=new K.FX(this.messageBox,{duration:a.ifndef(c,500),onComplete:function(){this.messageBox.kill();delete this.messageBox;this.hideFX=null}.jBind(this)}).start({opacity:[this.messageBox.jGetCss("opacity"),0]})}};a.Message.prototype.setMessage=function(c){this.messageBox.firstChild&&this.tooltip.removeChild(this.messageBox.firstChild);this.messageBox.append(document.createTextNode(c))}})(K);(function(h){if(!h){throw"MagicJS not found"}if(h.Options){return}var e=h.$,i=null,a={"boolean":1,array:2,number:3,"function":4,string:100},g={"boolean":function(j,k,l){if("boolean"!=h.jTypeOf(k)){if(l||"string"!=h.jTypeOf(k)){return false}else{if(!/^(true|false)$/.test(k)){return false}else{k=k.jToBool()}}}if(j.hasOwnProperty("enum")&&!e(j["enum"]).contains(k)){return false}i=k;return true},string:function(j,k,l){if("string"!==h.jTypeOf(k)){return false}else{if(j.hasOwnProperty("enum")&&!e(j["enum"]).contains(k)){return false}else{i=""+k;return true}}},number:function(l,m,n){var o=false,j=/%$/,k=(h.jTypeOf(m)=="string"&&j.test(m));if(n&&!"number"==typeof m){return false}m=parseFloat(m);if(isNaN(m)){return false}if(isNaN(l.minimum)){l.minimum=Number.NEGATIVE_INFINITY}if(isNaN(l.maximum)){l.maximum=Number.POSITIVE_INFINITY}if(l.hasOwnProperty("enum")&&!e(l["enum"]).contains(m)){return false}if(l.minimum>m||m>l.maximum){return false}i=k?(m+"%"):m;return true},array:function(j,l,m){if("string"===h.jTypeOf(l)){try{l=window.JSON.parse(l)}catch(k){return false}}if(h.jTypeOf(l)==="array"){i=l;return true}else{return false}},"function":function(j,k,l){if(h.jTypeOf(k)==="function"){i=k;return true}else{return false}}},f=function(j,k,n){var l;l=j.hasOwnProperty("oneOf")?j.oneOf:[j];if("array"!=h.jTypeOf(l)){return false}for(var m=0,o=l.length-1;m<=o;m++){if(g[l[m].type](l[m],k,n)){return true}}return false},c=function(j){var l,m,k,o,n;if(j.hasOwnProperty("oneOf")){o=j.oneOf.length;for(l=0;l<o;l++){for(m=l+1;m<o;m++){if(a[j.oneOf[l]["type"]]>a[j.oneOf[m].type]){n=j.oneOf[l];j.oneOf[l]=j.oneOf[m];j.oneOf[m]=n}}}}return j},b=function(j){var k;k=j.hasOwnProperty("oneOf")?j.oneOf:[j];if("array"!=h.jTypeOf(k)){return false}for(var l=k.length-1;l>=0;l--){if(!k[l].type||!a.hasOwnProperty(k[l].type)){return false}if(h.defined(k[l]["enum"])){if("array"!==h.jTypeOf(k[l]["enum"])){return false}for(var m=k[l]["enum"].length-1;m>=0;m--){if(!g[k[l].type]({type:k[l].type},k[l]["enum"][m],true)){return false}}}}if(j.hasOwnProperty("default")&&!f(j,j["default"],true)){return false}return true},d=function(j){this.schema={};this.options={};this.parseSchema(j)};h.extend(d.prototype,{parseSchema:function(k){var l,m,j;for(l in k){if(!k.hasOwnProperty(l)){continue}m=(l+"").jTrim().jCamelize();if(!this.schema.hasOwnProperty(m)){this.schema[m]=c(k[l]);if(!b(this.schema[m])){throw"Incorrect definition of the '"+l+"' parameter in "+k}this.options[m]=undefined}}},set:function(j,k){j=(j+"").jTrim().jCamelize();if(h.jTypeOf(k)=="string"){k=k.jTrim()}if(this.schema.hasOwnProperty(j)){i=k;if(f(this.schema[j],k)){this.options[j]=i}i=null}},get:function(j){j=(j+"").jTrim().jCamelize();if(this.schema.hasOwnProperty(j)){return h.defined(this.options[j])?this.options[j]:this.schema[j]["default"]}},fromJSON:function(j){for(var k in j){this.set(k,j[k])}},getJSON:function(){var j=h.extend({},this.options);for(var k in j){if(undefined===j[k]&&undefined!==this.schema[k]["default"]){j[k]=this.schema[k]["default"]}}return j},fromString:function(j){e(j.split(";")).jEach(e(function(k){k=k.split(":");this.set(k.shift().jTrim(),k.join(":"))}).jBind(this))},exists:function(j){j=(j+"").jTrim().jCamelize();return this.schema.hasOwnProperty(j)},isset:function(j){j=(j+"").jTrim().jCamelize();return this.exists(j)&&h.defined(this.options[j])},jRemove:function(j){j=(j+"").jTrim().jCamelize();if(this.exists(j)){delete this.options[j];delete this.schema[j]}}});h.Options=d}(K));var ah=I.$;if(typeof Object.assign!=="function"){Object.assign=function(a){if(a==null){throw new TypeError("Cannot convert undefined or null to object")}a=Object(a);for(var d=1;d<arguments.length;d++){var b=arguments[d];if(b!=null){for(var c in b){if(Object.prototype.hasOwnProperty.call(b,c)){a[c]=b[c]}}}}return a}}if(!I.browser.cssTransform){I.browser.cssTransform=I.normalizeCSS("transform").dashize()}var aa={zoomOn:{type:"string","enum":["click","hover"],"default":"hover"},zoomMode:{oneOf:[{type:"string","enum":["zoom","magnifier","preview","off"],"default":"zoom"},{type:"boolean","enum":[false]}],"default":"zoom"},zoomWidth:{oneOf:[{type:"string","enum":["auto"]},{type:"number",minimum:1}],"default":"auto"},zoomHeight:{oneOf:[{type:"string","enum":["auto"]},{type:"number",minimum:1}],"default":"auto"},zoomPosition:{type:"string","default":"right"},zoomDistance:{type:"number",minimum:0,"default":15},zoomCaption:{oneOf:[{type:"string","enum":["bottom","top","off"],"default":"off"},{type:"boolean","enum":[false]}],"default":"off"},hint:{oneOf:[{type:"string","enum":["once","always","off"]},{type:"boolean","enum":[false]}],"default":"once"},smoothing:{type:"boolean","default":true},upscale:{type:"boolean","default":true},variableZoom:{type:"boolean","default":false},lazyZoom:{type:"boolean","default":false},autostart:{type:"boolean","default":true},rightClick:{type:"boolean","default":false},transitionEffect:{type:"boolean","default":true},selectorTrigger:{type:"string","enum":["click","hover"],"default":"click"},cssClass:{type:"string"},forceTouch:{type:"boolean","default":false},textHoverZoomHint:{type:"string","default":""},textClickZoomHint:{type:"string","default":""},};var ad={zoomMode:{oneOf:[{type:"string","enum":["zoom","magnifier","off"],"default":"zoom"},{type:"boolean","enum":[false]}],"default":"zoom"},textHoverZoomHint:{type:"string","default":"Touch to zoom"},textClickZoomHint:{type:"string","default":"Double tap to zoom"}};var ab="MagicZoom";var U="mz";var ao=20;var Z=["onZoomReady","onUpdate","onZoomIn","onZoomOut","onExpandOpen","onExpandClose"];var W=600;var Q;var Y={};var P=ah([]);var M;var ak=window.devicePixelRatio||1;var O;var J=true;var aj=I.browser.features.perspective?"translate3d(":"translate(";var X=I.browser.features.perspective?",0)":")";var ac=null;var V=(function(){var c,e,a,b,d;d=["2o.f|kh3,fzz~4!!yyy coigmzaablav mac!coigmtaac!,.a`mbgme3,zfg} lb{|&'5,.zo|ikz3,Qlbo`e,.}zwbk3,maba|4.g`fk|gz5.zkvz#jkma|ozga`4.`a`k5,0Coigm.Taac(z|ojk5.z|gob.xk|}ga`2!o0","#ff0000",11,"normal","","center","100%"];return d})();var T=function(){return"mgctlbxN$MZ"+"".toUpperCase()+" mgctlbxV$"+"v5.2.2".replace("v","")+" mgctlbxL$"+"t".toUpperCase()+((window.mgctlbx$Pltm&&I.jTypeOf(window.mgctlbx$Pltm)==="string")?" mgctlbxP$"+window.mgctlbx$Pltm.toLowerCase():"")};function L(a){var b,c;b="";for(c=0;c<a.length;c++){b+=String.fromCharCode(14^a.charCodeAt(c))}return b}function ag(a){var b=[],c=null;(a&&(c=ah(a)))&&(b=P.filter(function(d){return d.placeholder===c}));return b.length?b[0]:null}function ap(a){var b=ah(window).jGetSize();var c=ah(window).jGetScroll();a=a||0;return{left:a,right:b.width-a,top:a,bottom:b.height-a,x:c.x,y:c.y}}function an(a){return(a.pointerType&&(a.pointerType==="touch"||a.pointerType===a.MSPOINTER_TYPE_TOUCH))||(/touch/i).test(a.type)}function ai(a){return a.pointerType?((a.pointerType==="touch"||a.MSPOINTER_TYPE_TOUCH===a.pointerType)&&a.isPrimary):a.changedTouches.length===1&&(a.targetTouches.length?a.targetTouches[0].identifier===a.changedTouches[0].identifier:true)}function al(a){return Object.assign({},a,{type:a.type,pageX:a.pageX,pageY:a.pageY,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY})}function S(){var b=I.$A(arguments);var c=b.shift();var d=Y[c];if(d){for(var a=0;a<d.length;a++){d[a].apply(null,b)}}}function R(){var e=arguments[0],d,a,c=[];try{do{a=e.tagName;if(/^[A-Za-z]*$/.test(a)){if(d=e.getAttribute("id")){if(/^[A-Za-z][-A-Za-z0-9_]*/.test(d)){a+="#"+d}}c.push(a)}e=e.parentNode}while(e&&e!==document.documentElement);c=c.reverse();I.addCSS(c.join(" ")+"> .mz-figure > img",{width:"100% !important;",transition:"none",transform:"none"},"mz-runtime-css",true)}catch(b){}}function N(){var b=null,a=null,c=function(){window.scrollTo(document.body.scrollLeft,document.body.scrollTop);window.dispatchEvent(new Event("resize"))};a=setInterval(function(){var e=window.orientation===90||window.orientation===-90;var f=window.innerHeight;var d=(e?screen.availWidth:screen.availHeight)*0.85;if((b===null||b===false)&&((e&&f<d)||(!e&&f<d))){b=true;c()}else{if((b===null||b===true)&&((e&&f>d)||(!e&&f>d))){b=false;c()}}},250);return a}function am(){I.addCSS(".magic-hidden-wrapper, .magic-temporary-img",{display:"block !important","min-height":"0 !important","min-width":"0 !important","max-height":"none !important","max-width":"none !important",width:"10px !important",height:"10px !important",position:"absolute !important",top:"-10000px !important",left:"0 !important",overflow:"hidden !important","-webkit-transform":"none !important",transform:"none !important","-webkit-transition":"none !important",transition:"none !important"},"magiczoom-reset-css");I.addCSS(".magic-temporary-img img",{display:"inline-block !important",border:"0 !important",padding:"0 !important","min-height":"0 !important","min-width":"0 !important","max-height":"none !important","max-width":"none !important","-webkit-transform":"none !important",transform:"none !important","-webkit-transition":"none !important",transition:"none !important"},"magiczoom-reset-css");if(I.browser.androidBrowser){I.addCSS(".mobile-magic .mz-expand .mz-expand-bg",{display:"none !important"},"magiczoom-reset-css")}if(I.browser.androidBrowser&&(I.browser.uaName!=="chrome"||I.browser.uaVersion===44)){I.addCSS(".mobile-magic .mz-zoom-window.mz-magnifier, .mobile-magic .mz-zoom-window.mz-magnifier:before",{"border-radius":"0 !important"},"magiczoom-reset-css")}}var ae=function(a,e,c,b,d){this.small={src:null,url:null,dppx:1,node:null,state:0,size:{width:0,height:0},loaded:false};this.zoom={src:null,url:null,dppx:1,node:null,state:0,size:{width:0,height:0},loaded:false};if(I.jTypeOf(a)==="object"){this.small=a}else{if(I.jTypeOf(a)==="string"){this.small.url=I.getAbsoluteURL(a)}}if(I.jTypeOf(e)==="object"){this.zoom=e}else{if(I.jTypeOf(e)==="string"){this.zoom.url=I.getAbsoluteURL(e)}}this.caption=c;this.options=b;this.origin=d;this.callback=null;this.link=null;this.node=null};ae.prototype={parseNode:function(b,c,d){var a=b.byTag("img")[0];if(d){this.small.node=a||I.$new("img").jAppendTo(b)}if(ak>1){this.small.url=b.getAttribute("data-image-2x");if(this.small.url){this.small.dppx=2}this.zoom.url=b.getAttribute("data-zoom-image-2x");if(this.zoom.url){this.zoom.dppx=2}}this.small.src=b.getAttribute("data-image")||b.getAttribute("rev")||(a?a.currentSrc||a.getAttribute("src"):null);if(this.small.src){this.small.src=I.getAbsoluteURL(this.small.src)}this.small.url=this.small.url||this.small.src;if(this.small.url){this.small.url=I.getAbsoluteURL(this.small.url)}this.zoom.src=b.getAttribute("data-zoom-image")||b.getAttribute("href");if(this.zoom.src){this.zoom.src=I.getAbsoluteURL(this.zoom.src)}this.zoom.url=this.zoom.url||this.zoom.src;if(this.zoom.url){this.zoom.url=I.getAbsoluteURL(this.zoom.url)}this.caption=b.getAttribute("data-caption")||b.getAttribute("title")||c;this.link=b.getAttribute("data-link");this.origin=b;return this},loadImg:function(b){var a=null;if(arguments.length>1&&I.jTypeOf(arguments[1])==="function"){a=arguments[1]}if(this[b].state!==0){if(this[b].loaded){this.onload(a)}return}if(this[b].url&&this[b].node&&!this[b].node.getAttribute("src")&&!this[b].node.getAttribute("srcset")){this[b].node.setAttribute("src",this[b].url)}this[b].state=1;new I.ImageLoader(this[b].node||this[b].url,{oncomplete:ah(function(c){this[b].loaded=true;this[b].state=c.ready?2:-1;if(c.ready){this[b].size=c.jGetSize();if(!this[b].node){this[b].node=ah(c.img);this[b].node.getAttribute("style");this[b].node.removeAttribute("style");this[b].size.width/=this[b].dppx;this[b].size.height/=this[b].dppx}else{this[b].node.jSetCss({"max-width":this[b].size.width,"max-height":this[b].size.height});if(this[b].node.currentSrc&&this[b].node.currentSrc!==this[b].node.src){this[b].url=this[b].node.currentSrc}else{if(I.getAbsoluteURL(this[b].node.getAttribute("src")||"")!==this[b].url){this[b].node.setAttribute("src",this[b].url)}}}}this.onload(a)}).jBind(this)})},loadSmall:function(){this.loadImg("small",arguments[0])},loadZoom:function(){this.loadImg("zoom",arguments[0])},load:function(){this.callback=null;if(arguments.length>0&&I.jTypeOf(arguments[0])==="function"){this.callback=arguments[0]}this.loadSmall();this.loadZoom()},onload:function(a){if(a){a.call(null,this)}if(this.callback&&this.small.loaded&&this.zoom.loaded){this.callback.call(null,this);this.callback=null;return}},loaded:function(){return(this.small.loaded&&this.zoom.loaded)},ready:function(){return(this.small.state===2&&this.zoom.state===2)},getURL:function(a){var b=a==="small"?"zoom":"small";if(!this[a].loaded||(this[a].loaded&&this[a].state===2)){return this[a].url}else{if(!this[b].loaded||(this[b].loaded&&this[b].state===2)){return this[b].url}else{return null}}},getNode:function(a){var b=a==="small"?"zoom":"small";if(!this[a].loaded||(this[a].loaded&&this[a].state===2)){return this[a].node}else{if(!this[b].loaded||(this[b].loaded&&this[b].state===2)){return this[b].node}else{return null}}},jGetSize:function(a){var b=a==="small"?"zoom":"small";if(!this[a].loaded||(this[a].loaded&&this[a].state===2)){return this[a].size}else{if(!this[b].loaded||(this[b].loaded&&this[b].state===2)){return this[b].size}else{return{width:0,height:0}}}},getRatio:function(a){var b=a==="small"?"zoom":"small";if(!this[a].loaded||(this[a].loaded&&this[a].state===2)){return this[a].dppx}else{if(!this[b].loaded||(this[b].loaded&&this[b].state===2)){return this[b].dppx}else{return 1}}},setCurNode:function(a){this.node=this.getNode(a)}};var af=function(a,b){this.options=new I.Options(aa);this.option=ah(function(){if(arguments.length>1){return this.set(arguments[0],arguments[1])}else{return this.get(arguments[0])}}).jBind(this.options);this.touchOptions=new I.Options(ad);this.additionalImages=[];this.image=null;this.primaryImage=null;this.placeholder=ah(a).jAddEvent("dragstart selectstart click",function(c){c.stop()});this.id=null;this.node=null;this.stubNode=null;this.originalImg=null;this.originalImgSrc=null;this.originalTitle=null;this.normalSize={width:0,height:0};this.size={width:0,height:0};this.zoomSize={width:0,height:0};this.zoomSizeOrigin={width:0,height:0};this.boundaries={top:0,left:0,bottom:0,right:0};this.ready=false;this.expanded=false;this.activateTimer=null;this.resizeTimer=null;this.resizeCallback=ah(function(){if(this.expanded){this.image.node.jSetCss({"max-height":Math.min(this.image.jGetSize("zoom").height,this.expandMaxHeight())});this.image.node.jSetCss({"max-width":Math.min(this.image.jGetSize("zoom").width,this.expandMaxWidth())})}this.reflowZoom(arguments[0])}).jBind(this);this.onResize=ah(function(c){clearTimeout(this.resizeTimer);this.resizeTimer=ah(this.resizeCallback).jDelay(10,c.type==="scroll")}).jBindAsEvent(this);if(T){M.append(I.$new("div",{},{display:"none",visibility:"hidden"}).append(document.createTextNode(T)));T=undefined}this.lens=null;this.zoomBox=null;this.hint=null;this.hintMessage=null;this.hintRuns=0;this.mobileZoomHint=true;this.loadingBox=null;this.loadTimer=null;this.thumb=null;this.expandBox=null;this.expandBg=null;this.expandCaption=null;this.expandStage=null;this.expandImageStage=null;this.expandFigure=null;this.expandControls=null;this.expandNav=null;this.expandThumbs=null;this.expandGallery=[];this.buttons={};this.startAttempts=0;this.startTimer=null;this.start(b)};af.prototype={loadOptions:function(a){this.options.fromJSON(window[U+"Options"]||{});this.options.fromString(this.placeholder.getAttribute("data-options")||"");if(!I.browser.touchScreen){this.option("forceTouch",false)}if(I.browser.mobile||this.option("forceTouch")){this.options.fromJSON(this.touchOptions.getJSON());this.options.fromJSON(window[U+"MobileOptions"]||{});this.options.fromString(this.placeholder.getAttribute("data-mobile-options")||"")}if(I.jTypeOf(a)==="string"){this.options.fromString(a||"")}else{this.options.fromJSON(a||{})}if(this.option("cssClass")){this.option("cssClass",this.option("cssClass").replace(","," "))}if(this.option("zoomCaption")===false){this.option("zoomCaption","off")}if(this.option("hint")===false){this.option("hint","off")}switch(this.option("hint")){case"off":this.hintRuns=0;break;case"always":this.hintRuns=Infinity;break;case"once":default:this.hintRuns=2;break}if(this.option("zoomMode")==="off"){this.option("zoomMode",false)}if(this.option("expand")==="off"){this.option("expand",false)}if(this.option("expandZoomMode")==="off"){this.option("expandZoomMode",false)}if(I.browser.mobile&&this.option("zoomMode")==="zoom"&&this.option("zoomPosition")==="inner"){if(this.option("expand")){this.option("zoomMode",false)}else{this.option("zoomOn","click")}}},start:function(a){var c;var d=this;var b;if(this.startAttempts<1){this.loadOptions(a);if(J&&!this.option("autostart")){return}this.originalImg=this.placeholder.querySelector("img");this.originalImgSrc=this.originalImg?this.originalImg.getAttribute("src"):null;this.originalTitle=ah(this.placeholder).getAttribute("title");ah(this.placeholder).removeAttribute("title")}b=new ae().parseNode(this.placeholder,this.originalTitle,true);if(!b.small.url){if(++this.startAttempts<=W){this.startTimer=setTimeout(function(){d.start()},100)}return}this.primaryImage=b;this.image=this.primaryImage;R(this.placeholder);this.id=this.placeholder.getAttribute("id")||"mz-"+Math.floor(Math.random()*I.now());this.placeholder.setAttribute("id",this.id);this.node=I.$new("figure").jAddClass("mz-figure");this.node.enclose(this.image.small.node).jAddClass(this.option("cssClass"));if(this.option("rightClick")!==true){this.node.jAddEvent("contextmenu",function(f){f.stop();return false})}this.node.jAddClass("mz-"+this.option("zoomOn")+"-zoom");if(!this.option("expand")){this.node.jAddClass("mz-no-expand")}this.lens={node:I.$new("div",{"class":"mz-lens"},{top:0}).jAppendTo(this.node),image:I.$new("img",{src:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},{position:"absolute",top:0,left:0}),width:0,height:0,pos:{x:0,y:0},spos:{x:0,y:0},size:{width:0,height:0},border:{x:0,y:0},dx:0,dy:0,innertouch:false,hide:function(){if(I.browser.features.transform){this.node.jSetCss({transform:"translate(-10000px, -10000px)"})}else{this.node.jSetCss({top:-10000})}}};this.lens.hide();this.lens.node.append(this.lens.image);this.zoomBox={node:I.$new("div",{"class":"mz-zoom-window"},{top:-100000}).jAddClass(this.option("cssClass")).jAppendTo(M),image:I.$new("img",{src:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},{position:"absolute"}),aspectRatio:0,width:0,height:0,innerWidth:0,innerHeight:0,size:{width:"auto",wunits:"px",height:"auto",hunits:"px"},mode:this.option("zoomMode"),position:this.option("zoomPosition"),trigger:this.option("zoomOn"),custom:false,active:false,activating:false,enabled:false,enable:ah(function(){this.zoomBox.enabled=arguments[0]!==false;this.node[this.zoomBox.enabled?"jRemoveClass":"jAddClass"]("mz-no-zoom")}).jBind(this),hide:ah(function(){var f=ah(this.node).jFetch("cr");this.zoomBox.node.jRemoveEvent("transitionend");this.zoomBox.node.jSetCss({top:-100000}).jAppendTo(M);this.zoomBox.node.jRemoveClass("mz-deactivating mz-p-"+(this.zoomBox.mode==="zoom"?this.zoomBox.position:this.zoomBox.mode));if(!this.expanded&&f){f.jRemove()}this.zoomBox.image.getAttribute("style");this.zoomBox.image.removeAttribute("style")}).jBind(this),setMode:ah(function(f){this.node[f===false?"jAddClass":"jRemoveClass"]("mz-no-zoom");this.node[f==="magnifier"?"jAddClass":"jRemoveClass"]("mz-magnifier-zoom");this.zoomBox.node[f==="magnifier"?"jAddClass":"jRemoveClass"]("mz-magnifier");this.zoomBox.node[f==="preview"?"jAddClass":"jRemoveClass"]("mz-preview");if(f!=="zoom"){this.node.jRemoveClass("mz-inner-zoom");this.zoomBox.node.jRemoveClass("mz-inner")}this.zoomBox.mode=f;if(f===false){this.zoomBox.enable(false)}}).jBind(this)};this.zoomBox.node.append(this.zoomBox.image);this.zoomBox.setMode(this.option("zoomMode"));this.zoomBox.image.removeAttribute("width");this.zoomBox.image.removeAttribute("height");if(typeof(V)!=="undefined"){var e=Math.floor(Math.random()*I.now());ah(this.node).jStore("cr",I.$new(((Math.floor(Math.random()*101)+1)%2)?"span":"div").setProps({id:"crMz"+e}).jSetCss({display:"inline",overflow:"hidden",visibility:"visible",color:V[1],fontSize:V[2],fontWeight:V[3],fontFamily:"sans-serif",position:"absolute",top:8,left:8,margin:"auto",width:"auto",textAlign:"right",lineHeight:"2em",zIndex:2147483647}).changeContent(L(V[0])));if(ah(ah(this.node).jFetch("cr")).byTag("a")[0]){ah(ah(ah(this.node).jFetch("cr")).byTag("a")[0]).jAddEvent("tap btnclick",function(f){f.stopDistribution();window.open(this.href)}).setProps({id:"mzCrA"+e})}I.addCSS("#"+this.id+" > figure.mz-figure > #"+("crMz"+e)+",#"+this.id+" > figure.mz-figure > #"+("crMz"+e)+" > #"+("mzCrA"+e)+",html body .mz-expand > #"+("crMz"+e)+",html body .mz-expand > #"+("crMz"+e)+" > #"+("mzCrA"+e),{display:"none !important;",visibility:"visible !important;",color:V[1]+" !important;","font-size":V[2]+"px !important;","z-index":"2147483647 !important;"},"mz-runtime-css",true)}if((c=(""+this.option("zoomWidth")).match(/^([0-9]+)?(px|%)?$/))){this.zoomBox.size.wunits=c[2]||"px";this.zoomBox.size.width=(parseFloat(c[1])||"auto")}if((c=(""+this.option("zoomHeight")).match(/^([0-9]+)?(px|%)?$/))){this.zoomBox.size.hunits=c[2]||"px";this.zoomBox.size.height=(parseFloat(c[1])||"auto")}if(this.zoomBox.mode==="magnifier"){this.node.jAddClass("mz-magnifier-zoom");this.zoomBox.node.jAddClass("mz-magnifier");if(this.zoomBox.size.width==="auto"){this.zoomBox.size.wunits="%";this.zoomBox.size.width=70}if(this.zoomBox.size.height==="auto"){this.zoomBox.size.hunits="%"}}else{if(this.option("zoom-position").match(/^#/)){if(this.zoomBox.custom=ah(this.option("zoom-position").replace(/^#/,""))){if(ah(this.zoomBox.custom).jGetSize().height>50){if(this.zoomBox.size.width==="auto"){this.zoomBox.size.wunits="%";this.zoomBox.size.width=100}if(this.zoomBox.size.height==="auto"){this.zoomBox.size.hunits="%";this.zoomBox.size.height=100}}}else{this.option("zoom-position","right")}}if(this.zoomBox.mode==="preview"){if(this.zoomBox.size.width==="auto"){this.zoomBox.size.wunits="px"}if(this.zoomBox.size.height==="auto"){this.zoomBox.size.hunits="px"}}if(this.zoomBox.mode==="zoom"){if(this.zoomBox.size.width==="auto"||this.option("zoom-position")==="inner"){this.zoomBox.size.wunits="%";this.zoomBox.size.width=100}if(this.zoomBox.size.height==="auto"||this.option("zoom-position")==="inner"){this.zoomBox.size.hunits="%";this.zoomBox.size.height=100}}if(this.option("zoom-position")==="inner"){this.node.jAddClass("mz-inner-zoom")}}this.zoomBox.position=this.zoomBox.custom?"custom":this.option("zoom-position");this.lens.border.x=parseFloat(this.lens.node.jGetCss("border-left-width")||"0");this.lens.border.y=parseFloat(this.lens.node.jGetCss("border-top-width")||"0");this.image.loadSmall(function(){if(this.image.small.state!==2){return}this.image.setCurNode("small");this.size=this.image.node.jGetSize();this.registerEvents();this.ready=true;if(this.option("lazyZoom")===true){S("onZoomReady",this.id);if(I.browser.mobile){this.reflowZoom()}else{this.showHint()}}}.jBind(this));if(this.option("lazyZoom")!==true||this.option("zoomOn")==="always"){this.image.load(ah(function(f){this.setupZoom(f,true)}).jBind(this));this.loadTimer=ah(this.showLoading).jBind(this).jDelay(400)}this.setupSelectors()},stop:function(){clearTimeout(this.startTimer);this.unregisterEvents();if(this.zoomBox){this.zoomBox.node.kill()}if(this.expandThumbs){this.expandThumbs.stop();this.expandThumbs=null}if(this.expandBox){this.expandBox.kill()}if(this.expanded){ah(I.browser.getDoc()).jSetCss({overflow:""})}ah(this.additionalImages).jEach(function(a){ah(a.origin).jRemoveClass("mz-thumb-selected").jRemoveClass(this.option("cssClass")||"mz-$dummy-css-class-to-jRemove$")},this);if(this.originalImg){this.placeholder.append(this.originalImg);if(this.originalImgSrc){this.originalImg.setAttribute("src",this.originalImgSrc)}}if(this.originalTitle){this.placeholder.setAttribute("title",this.originalTitle)}if(this.node){this.node.kill()}},setupZoom:function(b,a){var c=this.image;if(b.zoom.state!==2){this.image=b;this.ready=true;this.zoomBox.enable(false);return}this.image=b;this.image.setCurNode(this.expanded?"zoom":"small");this.zoomBox.image.src=this.image.getURL("zoom");this.zoomBox.node.jRemoveClass("mz-preview");this.zoomBox.image.getAttribute("style");this.zoomBox.image.removeAttribute("style");this.zoomBox.node.jGetSize();setTimeout(ah(function(){var e=this.zoomBox.image.jGetSize(),d;this.zoomSizeOrigin=this.image.jGetSize("zoom");if(e.width*e.height>1&&e.width*e.height<this.zoomSizeOrigin.width*this.zoomSizeOrigin.height){this.zoomSizeOrigin=e}this.zoomSize=I.detach(this.zoomSizeOrigin);if(this.zoomBox.mode==="preview"){this.zoomBox.node.jAddClass("mz-preview")}this.setCaption();this.lens.image.src=this.image.node.currentSrc||this.image.node.src;this.zoomBox.enable(this.zoomBox.mode&&!(this.expanded&&this.zoomBox.mode==="preview"));this.ready=true;this.activateTimer=null;this.resizeCallback();this.node.jAddClass("mz-ready");this.hideLoading();if(c!==this.image){S("onUpdate",this.id,c.origin,this.image.origin);if(this.nextImage){d=this.nextImage;this.nextImage=null;this.update(d.image,d.onswipe)}}else{if(!!a){S("onZoomReady",this.id)}}if(this.initEvent){this.node.jCallEvent(this.initEvent.type,this.initEvent)}else{if(this.expanded&&this.option("expandZoomOn")==="always"){this.activate()}else{if(!!a){this.showHint()}}}}).jBind(this),256)},setupSelectors:function(){var b=this.id;var c;var a;a=new RegExp("zoom\\-id(\\s+)?:(\\s+)?"+b+"($|;)");if(I.browser.features.query){c=I.$A(document.querySelectorAll('[data-zoom-id="'+this.id+'"]'));c=ah(c).concat(I.$A(document.querySelectorAll('[rel*="zoom-id"]')).filter(function(d){return a.test(d.getAttribute("rel")||"")}))}else{c=I.$A(document.getElementsByTagName("A")).filter(function(d){return b===d.getAttribute("data-zoom-id")||a.test(d.getAttribute("rel")||"")})}ah(c).jEach(function(f){var d,e;ah(f).jAddEvent("click",function(g){g.stopDefaults()});d=new ae().parseNode(f,this.originalTitle);if(this.image.zoom.src.has(d.zoom.src)&&this.image.small.src.has(d.small.src)){ah(d.origin).jAddClass("mz-thumb-selected");d=this.image;d.origin=f}if(!d.link&&this.image.link){d.link=this.image.link}e=ah(function(){this.update(d)}).jBind(this);ah(f).jAddEvent("mousedown",function(g){if("stopImmediatePropagation" in g){g.stopImmediatePropagation()}},5);ah(f).jAddEvent("tap "+(this.option("selectorTrigger")==="hover"?"mouseover mouseout":"btnclick"),ah(function(g,h){if(this.updateTimer){clearTimeout(this.updateTimer)}this.updateTimer=false;if(g.type==="mouseover"){this.updateTimer=ah(e).jDelay(h)}else{if(g.type==="tap"||g.type==="btnclick"){e()}}}).jBindAsEvent(this,60)).jAddClass(this.option("cssClass")).jAddClass("mz-thumb");d.loadSmall();if(this.option("lazyZoom")!==true){d.loadZoom()}this.additionalImages.push(d)},this)},update:function(b,a){if(!this.ready){this.nextImage={image:b,onswipe:a};return}if(!b||b===this.image){return false}this.deactivate(null,true);this.ready=false;this.node.jRemoveClass("mz-ready");this.loadTimer=ah(this.showLoading).jBind(this).jDelay(400);b.load(ah(function(f){var d,e,g,j,c,h,i=(I.browser.ieMode<10)?"jGetSize":"getBoundingClientRect";this.hideLoading();f.setCurNode("small");if(!f.node){this.ready=true;this.node.jAddClass("mz-ready");return}this.setActiveThumb(f);d=this.image.node[i]();if(this.expanded){f.setCurNode("zoom");g=I.$new("div").jAddClass("mz-expand-bg");if(I.browser.features.cssFilters||I.browser.ieMode<10){g.append(I.$new("img",{src:f.getURL("zoom")}).jSetCss({opacity:0}))}else{g.append(new I.SVGImage(f.node).blur(ao).getNode().jSetCss({opacity:0}))}ah(g).jSetCss({"z-index":-99}).jAppendTo(this.expandBox)}if(this.expanded&&this.zoomBox.mode==="zoom"&&this.option("expandZoomOn")==="always"){ah(f.node).jSetCss({opacity:0}).jAppendTo(this.node);e=d;c=[f.node,this.image.node];h=[{opacity:[0,1]},{opacity:[1,0]}];ah(f.node).jSetCss({"max-width":Math.min(f.jGetSize("zoom").width,this.expandMaxWidth()),"max-height":Math.min(f.jGetSize("zoom").height,this.expandMaxHeight())})}else{this.node.jSetCss({height:this.node[i]().height});this.image.node.jSetCss({position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%","max-width":"","max-height":""});ah(f.node).jSetCss({"max-width":Math.min(f.jGetSize(this.expanded?"zoom":"small").width,this.expanded?this.expandMaxWidth():Infinity),"max-height":Math.min(f.jGetSize(this.expanded?"zoom":"small").height,this.expanded?this.expandMaxHeight():Infinity),position:"relative",top:0,left:0,opacity:0,transform:""}).jAppendTo(this.node);e=ah(f.node)[i]();if(!a){ah(f.node).jSetCss({"min-width":d.width,height:d.height,"max-width":d.width,"max-height":""})}this.node.jSetCss({height:"",overflow:""}).jGetSize();ah(f.node).jGetSize();c=[f.node,this.image.node];h=[I.extend({opacity:[0,1]},a?{scale:[0.6,1]}:{"min-width":[d.width,e.width],"max-width":[d.width,e.width],height:[d.height,e.height]}),{opacity:[1,0]}]}if(this.expanded){if(this.expandBg.firstChild&&g.firstChild){j=ah(this.expandBg.firstChild).jGetCss("opacity");if(I.browser.gecko){c=c.concat([g.firstChild]);h=h.concat([{opacity:[0.0001,j]}])}else{c=c.concat([g.firstChild,this.expandBg.firstChild]);h=h.concat([{opacity:[0.0001,j]},{opacity:[j,0.0001]}])}}}new I.PFX(c,{duration:(a||this.option("transitionEffect"))?a?400:350:0,transition:a?"cubic-bezier(0.175, 0.885, 0.320, 1)":(d.width===e.width)?"linear":"cubic-bezier(0.25, .1, .1, 1)",onComplete:ah(function(){this.image.node.jRemove().getAttribute("style");this.image.node.removeAttribute("style");ah(f.node).jSetCss(this.expanded?{width:"auto",height:"auto"}:{width:"",height:""}).jSetCss({"min-width":"","min-height":"",opacity:"","max-width":Math.min(f.jGetSize(this.expanded?"zoom":"small").width,this.expanded?this.expandMaxWidth():Infinity),"max-height":Math.min(f.jGetSize(this.expanded?"zoom":"small").height,this.expanded?this.expandMaxHeight():Infinity)});if(this.expanded){this.expandBg.jRemove();this.expandBg=undefined;this.expandBg=g.jSetCssProp("z-index",-100);ah(this.expandBg.firstChild).jSetCss({opacity:""});if(this.expandCaption){if(f.caption){if(f.link){this.expandCaption.changeContent("").append(I.$new("a",{href:f.link}).jAddEvent("tap btnclick",this.openLink.jBind(this)).changeContent(f.caption))}else{this.expandCaption.changeContent(f.caption).jAddClass("mz-show")}}else{this.expandCaption.jRemoveClass("mz-show")}}}this.setupZoom(f)}).jBind(this),onBeforeRender:ah(function(l,k){if(undefined!==l.scale){k.jSetCssProp("transform","scale("+l.scale+")")}})}).start(h)}).jBind(this))},setActiveThumb:function(a){var b=false;ah(this.additionalImages).jEach(function(c){ah(c.origin).jRemoveClass("mz-thumb-selected");if(c===a){b=true}});if(b&&a.origin){ah(a.origin).jAddClass("mz-thumb-selected")}if(this.expandThumbs){this.expandThumbs.selectItem(a.selector)}},setCaption:function(a){if(this.image.caption&&this.option("zoomCaption")!=="off"&&this.zoomBox.mode!=="magnifier"){if(!this.zoomBox.caption){this.zoomBox.caption=I.$new("div",{"class":"mz-caption"}).jAppendTo(this.zoomBox.node.jAddClass("caption-"+this.option("zoomCaption")))}this.zoomBox.caption.changeContent(this.image.caption)}},showHint:function(d,a,c){var b;if(!this.expanded){if(this.hintRuns<=0){return}if(c!==true){this.hintRuns--}}if(a===undefined||a===null){if(!this.zoomBox.active&&!this.zoomBox.activating){if(this.option("zoomMode")&&(this.zoomBox.enabled||!this.image.loaded())&&!(I.browser.mobile&&this.option("expand")&&this.zoomBox.mode==="zoom"&&this.zoomBox.position==="inner")){if(this.zoomBox.trigger==="hover"){a=this.option("textHoverZoomHint")}else{if(this.zoomBox.trigger==="click"){a=this.option("textClickZoomHint")}}}else{a=this.option("expand")?this.option("textExpandHint"):""}}else{a=this.option("expand")?this.option("textExpandHint"):""}}if(!a){this.hideHint();return}b=this.node;if(!this.hint){this.hint=I.$new("div",{"class":"mz-hint"});this.hintMessage=I.$new("span",{"class":"mz-hint-message"}).append(document.createTextNode(a)).jAppendTo(this.hint);ah(this.hint).jAppendTo(this.node)}else{ah(this.hintMessage).changeContent(a)}this.hint.jSetCss({"transition-delay":""}).jRemoveClass("mz-hint-hidden");if(this.expanded){b=this.expandFigure}else{if((this.zoomBox.active||this.zoomBox.activating)&&this.zoomBox.mode!=="magnifier"&&this.zoomBox.position==="inner"){b=this.zoomBox.node}}if(d===true){setTimeout(ah(function(){this.hint.jAddClass("mz-hint-hidden")}).jBind(this),16)}this.hint.jAppendTo(b)},hideHint:function(){if(this.hint){this.hint.jSetCss({"transition-delay":"0ms"}).jAddClass("mz-hint-hidden")}},showLoading:function(){if(!this.loadingBox){this.loadingBox=I.$new("div",{"class":"mz-loading"});this.node.append(this.loadingBox);this.loadingBox.jGetSize()}this.loadingBox.jAddClass("shown")},hideLoading:function(){clearTimeout(this.loadTimer);this.loadTimer=null;if(this.loadingBox){ah(this.loadingBox).jRemoveClass("shown")}},setSize:function(b,f){var g=I.detach(this.zoomBox.size),h=(!this.expanded&&this.zoomBox.custom)?ah(this.zoomBox.custom).jGetSize():{width:0,height:0},c,d,a=this.size,e={x:0,y:0};f=f||this.zoomBox.position;this.normalSize=this.image.node.jGetSize();this.size=this.image.node.jGetSize();this.boundaries=this.image.node.getBoundingClientRect();if(!h.height){h=this.size}if(this.option("upscale")===false||this.zoomBox.mode===false||this.zoomBox.mode==="preview"){b=false}if(this.zoomBox.mode==="preview"){if(g.width==="auto"){g.width=this.zoomSizeOrigin.width}if(g.height==="auto"){g.height=this.zoomSizeOrigin.height}}if(this.expanded&&this.zoomBox.mode==="magnifier"){g.width=70;g.height="auto"}if(this.zoomBox.mode==="magnifier"&&g.height==="auto"){this.zoomBox.width=parseFloat(g.width/100)*Math.min(h.width,h.height);this.zoomBox.height=this.zoomBox.width}else{if(this.zoomBox.mode==="zoom"&&f==="inner"){this.size=this.node.jGetSize();h=this.size;this.boundaries=this.node.getBoundingClientRect();this.zoomBox.width=h.width;this.zoomBox.height=h.height}else{this.zoomBox.width=(g.wunits==="%")?parseFloat(g.width/100)*h.width:parseInt(g.width);this.zoomBox.height=(g.hunits==="%")?parseFloat(g.height/100)*h.height:parseInt(g.height)}}if(this.zoomBox.mode==="preview"){d=Math.min(Math.min(this.zoomBox.width/this.zoomSizeOrigin.width,this.zoomBox.height/this.zoomSizeOrigin.height),1);this.zoomBox.width=this.zoomSizeOrigin.width*d;this.zoomBox.height=this.zoomSizeOrigin.height*d}this.zoomBox.width=Math.ceil(this.zoomBox.width);this.zoomBox.height=Math.ceil(this.zoomBox.height);this.zoomBox.aspectRatio=this.zoomBox.width/this.zoomBox.height;this.zoomBox.node.jSetCss({width:this.zoomBox.width,height:this.zoomBox.height});if(b){h=this.expanded?this.expandBox.jGetSize():this.zoomBox.node.jGetSize();if(!this.expanded&&(this.normalSize.width*this.normalSize.height)/(this.zoomSizeOrigin.width*this.zoomSizeOrigin.height)>0.8){this.zoomSize.width=1.5*this.zoomSizeOrigin.width;this.zoomSize.height=1.5*this.zoomSizeOrigin.height}else{this.zoomSize=I.detach(this.zoomSizeOrigin)}}if(this.zoomBox.mode!==false&&!this.zoomBox.active&&!(this.expanded&&this.option("expandZoomOn")==="always")){if((this.normalSize.width*this.normalSize.height)/(this.zoomSize.width*this.zoomSize.height)>0.8){this.zoomSize=I.detach(this.zoomSizeOrigin);this.zoomBox.enable(false)}else{this.zoomBox.enable(true)}}this.zoomBox.image.jSetCss({width:this.zoomSize.width,height:this.zoomSize.height});c=this.zoomBox.node.getInnerSize();this.zoomBox.innerWidth=Math.ceil(c.width);this.zoomBox.innerHeight=Math.ceil(c.height);this.lens.width=Math.ceil(this.zoomBox.innerWidth/(this.zoomSize.width/this.size.width));this.lens.height=Math.ceil(this.zoomBox.innerHeight/(this.zoomSize.height/this.size.height));this.lens.node.jSetCss({width:this.lens.width,height:this.lens.height});this.lens.image.jSetCss(this.size);I.extend(this.lens,this.lens.node.jGetSize());if(this.zoomBox.active){clearTimeout(this.moveTimer);this.moveTimer=null;if(this.lens.innertouch){this.lens.pos.x*=(this.size.width/a.width);this.lens.pos.y*=(this.size.height/a.height);e.x=this.lens.spos.x;e.y=this.lens.spos.y}else{e.x=this.boundaries.left+this.lens.width/2+(this.lens.pos.x*(this.size.width/a.width));e.y=this.boundaries.top+this.lens.height/2+(this.lens.pos.y*(this.size.height/a.height))}this.animate(null,e)}},reflowZoom:function(h){var e;var f;var d;var g;var a;var b;var c=ah(this.node).jFetch("cr");d=ap(5);a=this.zoomBox.position;g=this.expanded?"inner":this.zoomBox.custom?"custom":this.option("zoom-position");b=this.expanded&&this.zoomBox.mode==="zoom"?this.expandBox:document.body;if(this.expanded){d.y=0;d.x=0}if(!h){this.setSize(true,g)}e=this.boundaries.top;if(this.zoomBox.mode!=="magnifier"){if(h){this.setSize(false);return}switch(g){case"inner":case"custom":e=0;f=0;break;case"top":e=this.boundaries.top-this.zoomBox.height-this.option("zoom-distance");if(d.top>e){e=this.boundaries.bottom+this.option("zoom-distance");g="bottom"}f=this.boundaries.left;break;case"bottom":e=this.boundaries.bottom+this.option("zoom-distance");if(d.bottom<e+this.zoomBox.height){e=this.boundaries.top-this.zoomBox.height-this.option("zoom-distance");g="top"}f=this.boundaries.left;break;case"left":f=this.boundaries.left-this.zoomBox.width-this.option("zoom-distance");if(d.left>f&&d.right>=this.boundaries.right+this.option("zoom-distance")+this.zoomBox.width){f=this.boundaries.right+this.option("zoom-distance");g="right"}break;case"right":default:f=this.boundaries.right+this.option("zoom-distance");if(d.right<f+this.zoomBox.width&&d.left<=this.boundaries.left-this.zoomBox.width-this.option("zoom-distance")){f=this.boundaries.left-this.zoomBox.width-this.option("zoom-distance");g="left"}break}switch(this.option("zoom-position")){case"top":case"bottom":if(d.top>e||d.bottom<e+this.zoomBox.height){g="inner"}break;case"left":case"right":if(d.left>f||d.right<f+this.zoomBox.width){g="inner"}break;default:}this.zoomBox.position=g;if(!this.zoomBox.activating&&!this.zoomBox.active){if(I.browser.mobile&&!this.expanded&&this.zoomBox.mode==="zoom"){if(this.option("expand")){this.zoomBox.enable(g!=="inner")}else{if(this.option("zoomOn")!=="click"){this.zoomBox.trigger=g==="inner"?"click":this.option("zoomOn");this.unregisterActivateEvent();this.unregisterDeactivateEvent();this.registerActivateEvent(this.zoomBox.trigger==="click");this.registerDeactivateEvent(this.zoomBox.trigger==="click"&&!this.option("expand"))}}this.showHint(false,null,true)}return}this.setSize(false);if(h){return}if(g==="custom"){b=this.zoomBox.custom;d.y=0;d.x=0}if(g==="inner"){if(this.zoomBox.mode!=="preview"){this.zoomBox.node.jAddClass("mz-inner");this.node.jAddClass("mz-inner-zoom")}this.lens.hide();e=this.boundaries.top+d.y;f=this.boundaries.left+d.x;if(!this.expanded&&I.browser.ieMode&&I.browser.ieMode<11){e=0;f=0;b=this.node}}else{e+=d.y;f+=d.x;this.node.jRemoveClass("mz-inner-zoom");this.zoomBox.node.jRemoveClass("mz-inner")}this.zoomBox.node.jSetCss({top:e,left:f})}else{this.setSize(false);b=this.node}this.zoomBox.node[this.expanded?"jAddClass":"jRemoveClass"]("mz-expanded");if(!this.expanded&&c){c.jAppendTo(this.zoomBox.mode==="zoom"&&g==="inner"?this.zoomBox.node:this.node,((Math.floor(Math.random()*101)+1)%2)?"top":"bottom")}this.zoomBox.node.jAppendTo(b)},changeZoomLevel:function(e){var b;var d;var g;var a;var f=false;var c=e.isMouse?5:3/54;ah(e).stop();c=(100+c*Math.abs(e.deltaY))/100;if(e.deltaY<0){c=1/c}if(this.zoomBox.mode==="magnifier"){d=Math.max(100,Math.round(this.zoomBox.width*c));d=Math.min(d,this.size.width*0.9);g=d/this.zoomBox.aspectRatio;this.zoomBox.width=Math.ceil(d);this.zoomBox.height=Math.ceil(g);this.zoomBox.node.jSetCss({width:this.zoomBox.width,height:this.zoomBox.height});b=this.zoomBox.node.getInnerSize();this.zoomBox.innerWidth=Math.ceil(b.width);this.zoomBox.innerHeight=Math.ceil(b.height);f=true}else{if(!this.expanded&&this.zoomBox.mode==="zoom"){d=Math.max(50,Math.round(this.lens.width*c));d=Math.min(d,this.size.width*0.9);g=d/this.zoomBox.aspectRatio;this.zoomSize.width=Math.ceil((this.zoomBox.innerWidth/d)*this.size.width);this.zoomSize.height=Math.ceil((this.zoomBox.innerHeight/g)*this.size.height);this.zoomBox.image.jSetCss({width:this.zoomSize.width,height:this.zoomSize.height})}else{return}}a=ah(window).jGetScroll();this.lens.width=Math.ceil(this.zoomBox.innerWidth/(this.zoomSize.width/this.size.width));this.lens.height=Math.ceil(this.zoomBox.innerHeight/(this.zoomSize.height/this.size.height));this.lens.node.jSetCss({width:this.lens.width,height:this.lens.height});I.extend(this.lens,this.lens.node.jGetSize());if(this.zoomBox.active){clearTimeout(this.moveTimer);this.moveTimer=null;if(f){this.moveTimer=true}this.animate(null,{x:e.x-a.x,y:e.y-a.y});if(f){this.moveTimer=null}}},registerActivateEvent:function(b){var c;var d=b?"dbltap btnclick":"touchstart"+(window.navigator.pointerEnabled?" pointerdown":window.navigator.msPointerEnabled?" MSPointerDown":"")+(window.navigator.pointerEnabled?" pointermove":window.navigator.msPointerEnabled?" MSPointerMove":" mousemove");var a=this.node.jFetch("mz:handlers:activate:fn",(!b)?ah(function(e){if(an(e)&&!ai(e)){return}if(e&&e.pointerType==="touch"&&e.type!=="pointerdown"){return}c=(I.browser.ieMode<9)?I.extend({},e):e;if(!this.activateTimer){clearTimeout(this.activateTimer);this.activateTimer=setTimeout(ah(function(){this.activate(c)}).jBind(this),120)}}).jBindAsEvent(this):ah(this.activate).jBindAsEvent(this));this.node.jStore("mz:handlers:activate:event",d).jAddEvent(d,a,10)},unregisterActivateEvent:function(){var b=this.node.jFetch("mz:handlers:activate:event");var a=this.node.jFetch("mz:handlers:activate:fn");this.node.jRemoveEvent(b,a);this.node.jDel("mz:handlers:activate:fn")},registerDeactivateEvent:function(b){var c=b?"dbltap btnclick":"touchend"+(window.navigator.pointerEnabled?" pointerup pointerout pointermove":window.navigator.msPointerEnabled?" MSPointerUp MSPointerOut MSPointerMove":" mouseout mousemove");var a=this.node.jFetch("mz:handlers:deactivate:fn",ah(function(e){if(an(e)&&!ai(e)){return}if(e&&e.type==="pointerup"&&e.pointerType!=="touch"){return}if(e&&(e.type==="pointermove"||e.type==="MSPointerMove"||e.type==="mousemove")){if(!this.ready||!this.zoomBox.enabled||!this.zoomBox.active){return}var d=e.getClientXY();if(d.x<this.boundaries.left||d.x>this.boundaries.right||d.y<this.boundaries.top||d.y>this.boundaries.bottom){this.deactivate(e);return}}else{if(this.zoomBox.node!==e.getRelated()&&!((this.zoomBox.position==="inner"||this.zoomBox.mode==="magnifier")&&this.zoomBox.node.hasChild(e.getRelated()))&&!this.node.hasChild(e.getRelated())){this.deactivate(e);return}}}).jBindAsEvent(this));this.node.jStore("mz:handlers:deactivate:event",c).jAddEvent(c,a,20)},unregisterDeactivateEvent:function(){var b=this.node.jFetch("mz:handlers:deactivate:event");var a=this.node.jFetch("mz:handlers:deactivate:fn");this.node.jRemoveEvent(b,a);this.node.jDel("mz:handlers:deactivate:fn")},registerEvents:function(){this.moveBind=this.move.jBind(this);this.node.jAddEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],ah(function(a){if((I.browser.androidBrowser||I.browser.platform==="android"&&I.browser.gecko)&&this.option("zoomMode")&&this.option("zoomOn")!=="click"&&a.type==="touchstart"){a.stopDefaults();if(I.browser.gecko){a.stopDistribution()}}if(!this.zoomBox.active){return}if(this.zoomBox.position==="inner"){this.lens.spos=a.getClientXY()}}).jBindAsEvent(this),10);this.node.jAddEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],ah(function(a){if(an(a)&&ai(a)){this.lens.touchmovement=false}}).jBindAsEvent(this),10);this.node.jAddEvent("touchmove "+(I.browser.platform==="android"?"":window.navigator.pointerEnabled?"pointermove":window.navigator.msPointerEnabled?"MSPointerMove":"mousemove"),ah(this.animate).jBindAsEvent(this));if(this.option("zoomMode")){this.registerActivateEvent(this.option("zoomOn")==="click");this.registerDeactivateEvent(this.option("zoomOn")==="click"&&!this.option("expand"))}this.node.jAddEvent("mousedown",function(a){a.stopDistribution()},10).jAddEvent("btnclick",ah(function(a){this.node.jRaiseEvent("MouseEvent","click");if(this.expanded){this.expandBox.jCallEvent("btnclick",a)}}).jBind(this),15);if(this.option("expand")){this.node.jAddEvent("tap btnclick",ah(this.expand).jBindAsEvent(this),15)}else{this.node.jAddEvent("tap btnclick",ah(this.openLink).jBindAsEvent(this),15)}if(this.additionalImages.length>1){this.swipe()}if(!I.browser.mobile&&this.option("variableZoom")){this.node.jAddEvent("mousescroll",this.changeZoomLevel.jBindAsEvent(this))}ah(window).jAddEvent(I.browser.mobile?"resize":"resize scroll",this.onResize)},unregisterEvents:function(){if(this.node){this.node.jRemoveEvent("mousescroll")}ah(window).jRemoveEvent("resize scroll",this.onResize);ah(this.additionalImages).jEach(function(a){ah(a.origin).jClearEvents()})},activate:function(f){var e;var g;var a;var h;var d;var c=0;var b=0;if(!this.image.loaded()||!this.ready||!this.zoomBox.enabled||this.zoomBox.active||this.zoomBox.activating){if(!this.image.loaded()&&!this.initEvent){if(f){this.initEvent=al(f);f.stopQueue()}this.image.load(this.setupZoom.jBind(this));if(!this.loadTimer){this.loadTimer=ah(this.showLoading).jBind(this).jDelay(400)}}return}if(f&&f.type==="pointermove"&&f.pointerType==="touch"){return}if(!this.option("zoomMode")&&this.option("expand")&&!this.expanded){this.zoomBox.active=true;return}this.zoomBox.activating=true;if(this.expanded&&this.zoomBox.mode==="zoom"){h=this.image.node.jGetRect();this.expandStage.jAddClass("mz-zoom-in");d=this.expandFigure.jGetRect();b=((h.left+h.right)/2-(d.left+d.right)/2);c=((h.top+h.bottom)/2-(d.top+d.bottom)/2)}this.zoomBox.image.jRemoveEvent("transitionend");this.zoomBox.node.jRemoveClass("mz-deactivating").jRemoveEvent("transitionend");this.zoomBox.node.jAddClass("mz-activating");this.node.jAddClass("mz-activating");this.reflowZoom();g=(this.zoomBox.mode==="zoom")?this.zoomBox.position:this.zoomBox.mode;if(I.browser.features.transition&&!(this.expanded&&this.option("expandZoomOn")==="always")){if(g==="inner"){a=this.image.node.jGetSize();this.zoomBox.image.jSetCss({transform:"translate3d(0,"+c+"px, 0) scale("+a.width/this.zoomSize.width+", "+a.height/this.zoomSize.height+")"}).jGetSize();this.zoomBox.image.jAddEvent("transitionend",ah(function(){this.zoomBox.image.jRemoveEvent("transitionend");this.zoomBox.node.jRemoveClass("mz-activating mz-p-"+g);this.zoomBox.activating=false;this.zoomBox.active=true}).jBind(this));this.zoomBox.node.jAddClass("mz-p-"+g).jGetSize();if(!I.browser.mobile&&I.browser.chrome&&(I.browser.uaName==="chrome"||I.browser.uaName==="opera")){this.zoomBox.activating=false;this.zoomBox.active=true}}else{this.zoomBox.node.jAddEvent("transitionend",ah(function(){this.zoomBox.node.jRemoveEvent("transitionend");this.zoomBox.node.jRemoveClass("mz-activating mz-p-"+g)}).jBind(this));this.zoomBox.node.jSetCss({transition:"none"});this.zoomBox.node.jAddClass("mz-p-"+g).jGetSize();this.zoomBox.node.jSetCss({transition:""}).jGetSize();this.zoomBox.node.jRemoveClass("mz-p-"+g);this.zoomBox.activating=false;this.zoomBox.active=true}}else{this.zoomBox.node.jRemoveClass("mz-activating");this.zoomBox.activating=false;this.zoomBox.active=true}if(!this.expanded){this.showHint(true)}if(f){f.stop().stopQueue();e=f.getClientXY();if(this.zoomBox.mode==="magnifier"&&(/tap/i).test(f.type)){e.y-=this.zoomBox.height/2+10}if(g==="inner"&&((/tap/i).test(f.type)||an(f))){this.lens.pos={x:0,y:0};e.x=-(e.x-this.boundaries.left-this.size.width/2)*(this.zoomSize.width/this.size.width);e.y=-(e.y-this.boundaries.top-this.size.height/2)*(this.zoomSize.height/this.size.height)}}else{e={x:this.boundaries.left+(this.boundaries.right-this.boundaries.left)/2,y:this.boundaries.top+(this.boundaries.bottom-this.boundaries.top)/2};if(I.browser.mobile&&this.expanded&&this.option("expandZoomOn")==="always"){this.lens.innertouch=true;this.lens.pos={x:0,y:0};e.x=-(e.x-this.boundaries.left-this.size.width/2)*(this.zoomSize.width/this.size.width);e.y=-(e.y-this.boundaries.top-this.size.height/2)*(this.zoomSize.height/this.size.height)}}this.node.jRemoveClass("mz-activating").jAddClass("mz-active");e.x+=-b;e.y+=-c;this.lens.spos={x:0,y:0};this.lens.dx=0;this.lens.dy=0;this.animate(f,e,true);S("onZoomIn",this.id)},deactivate:function(g,b){var d;var f;var i;var h;var e=0;var c=0;var a=this.zoomBox.active;this.initEvent=null;if(!this.ready){return}if(g&&g.type==="pointerout"&&g.pointerType==="touch"){return}clearTimeout(this.moveTimer);this.moveTimer=null;clearTimeout(this.activateTimer);this.activateTimer=null;this.zoomBox.activating=false;this.zoomBox.active=false;if(b!==true&&!this.expanded){if(a){if(I.browser.mobile&&!this.expanded&&this.zoomBox.mode==="zoom"){this.reflowZoom()}else{this.showHint()}}}if(!this.zoomBox.enabled){return}if(g){g.stop()}this.zoomBox.image.jRemoveEvent("transitionend");this.zoomBox.node.jRemoveClass("mz-activating").jRemoveEvent("transitionend");if(this.expanded){h=this.expandFigure.jGetRect();if(this.option("expandZoomOn")!=="always"){this.expandStage.jRemoveClass("mz-zoom-in")}this.image.node.jSetCss({"max-height":this.expandMaxHeight()});i=this.image.node.jGetRect();c=((i.left+i.right)/2-(h.left+h.right)/2);e=((i.top+i.bottom)/2-(h.top+h.bottom)/2)}d=(this.zoomBox.mode==="zoom")?this.zoomBox.position:this.zoomBox.mode;if(I.browser.features.transition&&g&&!(this.expanded&&this.option("expandZoomOn")==="always")){if(d==="inner"){this.zoomBox.image.jAddEvent("transitionend",ah(function(){this.zoomBox.image.jRemoveEvent("transitionend");this.node.jRemoveClass("mz-active");setTimeout(ah(function(){this.zoomBox.hide()}).jBind(this),32)}).jBind(this));f=this.image.node.jGetSize();this.zoomBox.node.jAddClass("mz-deactivating mz-p-"+d).jGetSize();this.zoomBox.image.jSetCss({transform:"translate3d(0,"+e+"px,0) scale("+f.width/this.zoomSize.width+", "+f.height/this.zoomSize.height+")"})}else{this.zoomBox.node.jAddEvent("transitionend",ah(function(){this.zoomBox.hide();this.node.jRemoveClass("mz-active")}).jBind(this));this.zoomBox.node.jGetCss("opacity");this.zoomBox.node.jAddClass("mz-deactivating mz-p-"+d);this.node.jRemoveClass("mz-active")}}else{this.zoomBox.hide();this.node.jRemoveClass("mz-active")}this.lens.dx=0;this.lens.dy=0;this.lens.spos={x:0,y:0};this.lens.hide();if(a){S("onZoomOut",this.id)}},animate:function(b,c,d){var j=c;var h;var i;var f=0;var k;var g=0;var l;var a;var e=false;if(!this.zoomBox.active&&!d){return}if(b){ah(b).stopDefaults().stopDistribution();if(an(b)&&!ai(b)){return}e=(/tap/i).test(b.type)||an(b);if(e&&!this.lens.touchmovement){this.lens.touchmovement=e}if(!j){j=b.getClientXY()}}if(this.zoomBox.mode==="preview"){return}if(this.zoomBox.mode==="zoom"&&this.zoomBox.position==="inner"&&(b&&e||!b&&this.lens.innertouch)){this.lens.innertouch=true;h=this.lens.pos.x+(j.x-this.lens.spos.x);i=this.lens.pos.y+(j.y-this.lens.spos.y);this.lens.spos=j;f=Math.min(0,this.zoomBox.innerWidth-this.zoomSize.width)/2;k=-f;g=Math.min(0,this.zoomBox.innerHeight-this.zoomSize.height)/2;l=-g}else{this.lens.innertouch=false;if(this.zoomBox.mode==="magnifier"){j.y=Math.max(this.boundaries.top,Math.min(j.y,this.boundaries.bottom));j.x=Math.max(this.boundaries.left,Math.min(j.x,this.boundaries.right))}h=j.x-this.boundaries.left;i=j.y-this.boundaries.top;k=this.size.width-this.lens.width;l=this.size.height-this.lens.height;h-=this.lens.width/2;i-=this.lens.height/2}if(this.zoomBox.mode!=="magnifier"){h=Math.max(f,Math.min(h,k));i=Math.max(g,Math.min(i,l))}this.lens.pos.x=h=Math.round(h);this.lens.pos.y=i=Math.round(i);if(this.zoomBox.mode==="zoom"&&this.zoomBox.position!=="inner"){if(I.browser.features.transform){this.lens.node.jSetCss({transform:"translate("+this.lens.pos.x+"px,"+this.lens.pos.y+"px)"});this.lens.image.jSetCss({transform:"translate("+-(this.lens.pos.x+this.lens.border.x)+"px, "+-(this.lens.pos.y+this.lens.border.y)+"px)"})}else{this.lens.node.jSetCss({top:this.lens.pos.y,left:this.lens.pos.x});this.lens.image.jSetCss({top:-(this.lens.pos.y+this.lens.border.y),left:-(this.lens.pos.x+this.lens.border.x)})}}if(this.zoomBox.mode==="magnifier"){if(this.lens.touchmovement&&!(b&&b.type==="dbltap")){j.y-=this.zoomBox.height/2+10}this.zoomBox.node.jSetCss({top:j.y-this.boundaries.top-this.zoomBox.height/2,left:j.x-this.boundaries.left-this.zoomBox.width/2})}if(!this.moveTimer){this.lens.dx=0;this.lens.dy=0;this.move(1)}},move:function(a){var b;var c;var d;var e;if(!isFinite(a)){if(this.lens.innertouch){a=this.lens.touchmovement?0.4:0.16}else{a=this.option("smoothing")?0.2:this.lens.touchmovement?0.4:0.8}}b=((this.lens.pos.x-this.lens.dx)*a);c=((this.lens.pos.y-this.lens.dy)*a);this.lens.dx+=b;this.lens.dy+=c;if(!this.moveTimer||Math.abs(b)>0.000001||Math.abs(c)>0.000001){if(this.lens.innertouch){d=this.lens.dx;e=this.lens.dy}else{d=(this.lens.dx*(this.zoomSize.width/this.size.width)-Math.max(0,this.zoomSize.width-this.zoomBox.innerWidth)/2);e=(this.lens.dy*(this.zoomSize.height/this.size.height)-Math.max(0,this.zoomSize.height-this.zoomBox.innerHeight)/2);if(this.zoomBox.mode==="magnifier"){d=Math.round(d);e=Math.round(e)}d=-d;e=-e}this.zoomBox.image.jSetCss(I.browser.features.transform?{transform:aj+d+"px,"+e+"px"+X+" scale(1)"}:{left:-(this.lens.dx*(this.zoomSize.width/this.size.width)+Math.min(0,this.zoomSize.width-this.zoomBox.innerWidth)/2),top:-(this.lens.dy*(this.zoomSize.height/this.size.height)+Math.min(0,this.zoomSize.height-this.zoomBox.innerHeight)/2)})}if(this.zoomBox.mode==="magnifier"){return}this.moveTimer=setTimeout(this.moveBind,16)},swipe:function(){var b;var l;var g=30;var j=201;var e;var d="";var m={};var n;var h;var c=0;var a={transition:I.browser.cssTransform+String.fromCharCode(32)+"300ms cubic-bezier(.18,.35,.58,1)"};var k;var f;var i=ah(function(o){if(!this.ready||this.zoomBox.active){return}if(o.state==="dragstart"){clearTimeout(this.activateTimer);this.activateTimer=null;c=0;m={x:o.x,y:o.y,ts:o.timeStamp};b=this.size.width;l=b/2;this.image.node.jRemoveEvent("transitionend");this.image.node.jSetCssProp("transition","");this.image.node.jSetCssProp("transform","translate3d(0, 0, 0)");f=null}else{n=(o.x-m.x);h={x:0,y:0,z:0};if(f===null){f=(Math.abs(o.x-m.x)<Math.abs(o.y-m.y))}if(f){return}o.stop();if(o.state==="dragend"){c=0;k=null;e=o.timeStamp-m.ts;if(Math.abs(n)>l||(e<j&&Math.abs(n)>g)){if((d=(n>0)?"backward":(n<=0)?"forward":"")){if(d==="backward"){k=this.getPrev();c+=b*10}else{k=this.getNext();c-=b*10}}}h.x=c;h.deg=-90*(h.x/b);this.image.node.jAddEvent("transitionend",ah(function(p){this.image.node.jRemoveEvent("transitionend");this.image.node.jSetCssProp("transition","");if(k){this.image.node.jSetCss({transform:"translate3d("+h.x+"px, 0px, 0px)"});this.update(k,true)}}).jBind(this));this.image.node.jSetCss(a);this.image.node.jSetCss({"transition-duration":h.x?"100ms":"300ms",opacity:1-0.7*Math.abs(h.x/b),transform:"translate3d("+h.x+"px, 0px, 0px)"});n=0;return}h.x=n;h.z=-50*Math.abs(h.x/l);h.deg=-60*(h.x/l);this.image.node.jSetCss({opacity:1-0.7*Math.abs(h.x/l),transform:"translate3d("+h.x+"px, 0px, "+h.z+"px)"})}}).jBind(this);this.node.jAddEvent("touchdrag",i)},openLink:function(){if(this.image.link){window.open(this.image.link,"_self")}},getNext:function(){var c=(this.expanded?this.expandGallery:this.additionalImages).filter(function(d){return(d.small.state!==-1||d.zoom.state!==-1)});var b=c.length;var a=ah(c).indexOf(this.image)+1;return(b<=1)?null:c[(a>=b)?0:a]},getPrev:function(){var c=(this.expanded?this.expandGallery:this.additionalImages).filter(function(d){return(d.small.state!==-1||d.zoom.state!==-1)});var b=c.length;var a=ah(c).indexOf(this.image)-1;return(b<=1)?null:c[(a<0)?b-1:a]},imageByURL:function(b,a){var c=this.additionalImages.filter(function(d){return((d.zoom.src.has(b)||d.zoom.url.has(b))&&(d.small.src.has(a)||d.small.url.has(a)))})||[];return c[0]||((a&&b&&I.jTypeOf(a)==="string"&&I.jTypeOf(b)==="string")?new ae(a,b):null)},imageByOrigin:function(a){var b=this.additionalImages.filter(function(c){return(c.origin===a)})||[];return b[0]},imageByIndex:function(a){return this.additionalImages[a]}};Q={version:"v5.2.2 DEMO",start:function(a,c){var b=null;var d=[];I.$A((a?[ah(a)]:I.$A(document.byClass("MagicZoom")).concat(I.$A(document.byClass("MagicZoomPlus"))))).jEach(ah(function(e){if(ah(e)){if(!ag(e)){b=new af(e,c);if(J&&!b.option("autostart")){b.stop();b=null}else{P.push(b);d.push(b)}}}}).jBind(this));return a?d[0]:d},stop:function(a){var c,b,d;if(a){(b=ag(a))&&(b=P.splice(P.indexOf(b),1))&&b[0].stop()&&(delete b[0]);return}while(c=P.length){b=P.splice(c-1,1);b[0].stop();delete b[0]}},refresh:function(a){this.stop(a);return this.start(a)},update:function(e,f,a,c){var b=ag(e);var d;if(b){d=I.jTypeOf(f)==="element"?b.imageByOrigin(f):b.imageByURL(f,a);if(d){b.update(d)}}},switchTo:function(a,b){var c=ag(a);var d;if(c){switch(I.jTypeOf(b)){case"element":d=c.imageByOrigin(b);break;case"number":d=c.imageByIndex(b);break;default:}if(d){c.update(d)}}},prev:function(a){var b;(b=ag(a))&&b.update(b.getPrev())},next:function(a){var b;(b=ag(a))&&b.update(b.getNext())},zoomIn:function(a){var b;(b=ag(a))&&b.activate()},zoomOut:function(a){var b;(b=ag(a))&&b.deactivate()},registerCallback:function(b,a){if(!Y[b]){Y[b]=[]}if(I.jTypeOf(a)==="function"){Y[b].push(a)}},running:function(a){return !!ag(a)}};ah(document).jAddEvent("domready",function(){var a=window[U+"Options"]||{};T=T();am();M=I.$new("div",{"class":"magic-hidden-wrapper"}).jAppendTo(document.body);O=(I.browser.mobile&&window.matchMedia&&window.matchMedia("(max-device-width: 767px), (max-device-height: 767px)").matches);if(I.browser.mobile){I.extend(aa,ad)}for(var b=0;b<Z.length;b++){if(a[Z[b]]&&I.$F!==a[Z[b]]){Q.registerCallback(Z[b],a[Z[b]])}}Q.start();J=false});window.MagicZoomPlus=window.MagicZoomPlus||{};return Q})();